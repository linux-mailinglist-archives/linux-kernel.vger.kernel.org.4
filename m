Return-Path: <linux-kernel-owner@vger.kernel.org>
X-Original-To: lists+linux-kernel@lfdr.de
Delivered-To: lists+linux-kernel@lfdr.de
Received: from out1.vger.email (out1.vger.email [IPv6:2620:137:e000::1:20])
	by mail.lfdr.de (Postfix) with ESMTP id 34E716E0D1A
	for <lists+linux-kernel@lfdr.de>; Thu, 13 Apr 2023 13:51:44 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S230354AbjDMLvl (ORCPT <rfc822;lists+linux-kernel@lfdr.de>);
        Thu, 13 Apr 2023 07:51:41 -0400
Received: from lindbergh.monkeyblade.net ([23.128.96.19]:52816 "EHLO
        lindbergh.monkeyblade.net" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S230151AbjDMLvf (ORCPT
        <rfc822;linux-kernel@vger.kernel.org>);
        Thu, 13 Apr 2023 07:51:35 -0400
Received: from dfw.source.kernel.org (dfw.source.kernel.org [139.178.84.217])
        by lindbergh.monkeyblade.net (Postfix) with ESMTPS id 7DDE29EF3;
        Thu, 13 Apr 2023 04:51:20 -0700 (PDT)
Received: from smtp.kernel.org (relay.kernel.org [52.25.139.140])
        (using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
        (No client certificate requested)
        by dfw.source.kernel.org (Postfix) with ESMTPS id D34E063DE6;
        Thu, 13 Apr 2023 11:51:19 +0000 (UTC)
Received: by smtp.kernel.org (Postfix) with ESMTPSA id 14545C433EF;
        Thu, 13 Apr 2023 11:51:19 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=kernel.org;
        s=k20201202; t=1681386679;
        bh=L5Hu3kkp5VrRdJ+qxwF4VoaOC9N/ABj+k4lfYZkqpK0=;
        h=Date:From:To:Cc:Subject:References:In-Reply-To:From;
        b=Hm2QBWF5pc1SKcaSDzVtw5AWGFlFAgQ9yg6kzSqnCAMbZtPP/Co0qGi+bNmDRYw/9
         9INszGucbAjqAFglbvHI5B/s4IzlujGvYguiEHOznRMld/0AhDadcYI51aunMaEvoc
         cl74Bx2pKU5WTiNqLHi9jPxAkJhL0qVag9V7WZceBnecBqeiLZMYxIhxKELxP0P0CF
         7KCWj+ASsYocsmXgUO6ouyRGNIS0bbdT7ru0dTejerxw9eIZm0SgvkWQejQ1NJIiIQ
         nI6qn1w0NlKPL8GIsj0/vEUfZhcP6xmLHqVF1BUNAInigIsJ72U9vQJLldA4KJaXPd
         sKLQRS7m961Dw==
Received: by quaco.ghostprotocols.net (Postfix, from userid 1000)
        id AE673403B5; Thu, 13 Apr 2023 08:51:16 -0300 (-03)
Date:   Thu, 13 Apr 2023 08:51:16 -0300
From:   Arnaldo Carvalho de Melo <acme@kernel.org>
To:     Ian Rogers <irogers@google.com>
Cc:     Peter Zijlstra <peterz@infradead.org>,
        Ingo Molnar <mingo@redhat.com>,
        Mark Rutland <mark.rutland@arm.com>,
        Alexander Shishkin <alexander.shishkin@linux.intel.com>,
        Jiri Olsa <jolsa@kernel.org>,
        Namhyung Kim <namhyung@kernel.org>,
        Zhengjun Xing <zhengjun.xing@linux.intel.com>,
        Kan Liang <kan.liang@linux.intel.com>,
        linux-perf-users@vger.kernel.org, linux-kernel@vger.kernel.org,
        Edward Baker <edward.baker@intel.com>,
        Perry Taylor <perry.taylor@intel.com>,
        Caleb Biggers <caleb.biggers@intel.com>,
        Stephane Eranian <eranian@google.com>
Subject: Re: [PATCH v2 00/21] Update uncore topics, 3x event updates, 2x new
 archs.
Message-ID: <ZDfstOf4UHxIJ+fq@kernel.org>
References: <20230413051011.3440849-1-irogers@google.com>
 <ZDfsEwcqNl7tJm37@kernel.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Disposition: inline
Content-Transfer-Encoding: 8bit
In-Reply-To: <ZDfsEwcqNl7tJm37@kernel.org>
X-Url:  http://acmel.wordpress.com
X-Spam-Status: No, score=-7.1 required=5.0 tests=BAYES_00,DKIMWL_WL_HIGH,
        DKIM_SIGNED,DKIM_VALID,DKIM_VALID_AU,DKIM_VALID_EF,RCVD_IN_DNSWL_HI,
        SPF_HELO_NONE,SPF_PASS,URIBL_BLOCKED autolearn=ham autolearn_force=no
        version=3.4.6
X-Spam-Checker-Version: SpamAssassin 3.4.6 (2021-04-09) on
        lindbergh.monkeyblade.net
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

Em Thu, Apr 13, 2023 at 08:48:35AM -0300, Arnaldo Carvalho de Melo escreveu:
> Em Wed, Apr 12, 2023 at 10:09:50PM -0700, Ian Rogers escreveu:
> > Update the uncore PMUs and topic classification as created by:
> > https://github.com/intel/perfmon/pull/70
> > 
> > Event updates stem from:
> > https://github.com/intel/perfmon/pull/68
> > impacting alderlake, icelakex and sapphirerapids.
> > 
> > Grand Ridge and Sierra Forest events stem from:
> > https://github.com/intel/perfmon/pull/69
> > 
> > Changes generated by with PR70 in place:
> > https://github.com/intel/perfmon/blob/main/scripts/create_perf_json.py
> > 
> > v2. Adds improvements to uncore topics, uncore PMU name fixes and
> >     fixes a trigraph issue from ??? being in the json.
> 
> Som problem with your mailer? Missing some patches, I'll try b4 +
> manual...

And it is failing on the first patch:

[acme@toolbox perf-tools-next]$ b4 am -P1 -ctsl --cc-trailers 20230413051011.3440849-1-irogers@google.com
Grabbing thread from lore.kernel.org/all/20230413051011.3440849-1-irogers%40google.com/t.mbox.gz
Checking for newer revisions
Grabbing search results from lore.kernel.org
Analyzing 14 messages in the thread
Checking attestation on all messages, may take a moment...
---
  ✓ [PATCH v2 1/21] perf vendor events intel: Update alderlake to v1.20
    ✓ Signed: DKIM/google.com
    + Link: https://lore.kernel.org/r/20230413051011.3440849-2-irogers@google.com
    + Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>
---
Total patches: 1 (cherrypicked: 1)
---
Cover: ./v2_20230412_irogers_update_uncore_topics_3x_event_updates_2x_new_archs.cover
 Link: https://lore.kernel.org/r/20230413051011.3440849-1-irogers@google.com
 Base: not specified
       git am ./v2_20230412_irogers_update_uncore_topics_3x_event_updates_2x_new_archs.mbx
⬢[acme@toolbox perf-tools-next]$        git am ./v2_20230412_irogers_update_uncore_topics_3x_event_updates_2x_new_archs.mbx
Applying: perf vendor events intel: Update alderlake to v1.20
error: patch failed: tools/perf/pmu-events/arch/x86/alderlake/other.json:162
error: tools/perf/pmu-events/arch/x86/alderlake/other.json: patch does not apply
error: patch failed: tools/perf/pmu-events/arch/x86/alderlake/pipeline.json:31
error: tools/perf/pmu-events/arch/x86/alderlake/pipeline.json: patch does not apply
error: patch failed: tools/perf/pmu-events/arch/x86/mapfile.csv:1
error: tools/perf/pmu-events/arch/x86/mapfile.csv: patch does not apply
Patch failed at 0001 perf vendor events intel: Update alderlake to v1.20
hint: Use 'git am --show-current-patch=diff' to see the failed patch
When you have resolved this problem, run "git am --continue".
If you prefer to skip this patch, run "git am --skip" instead.
To restore the original branch and stop patching, run "git am --abort".
⬢[acme@toolbox perf-tools-next]$ git log --oneline -10
4453deacf44615b2 (HEAD -> perf-tools-next, quaco/perf-tools-next, acme/tmp.perf-tools-next, acme/perf-tools-next) perf sched: Fix sched latency analysis incorrection when using 'sched:sched_wakeup'
9efe423e43878934 (acme/perf/core) perf pmu: Use perf_cpu_map__set_nr() in perf_pmu__cpus_match() to allow for refcnt checking
b277851417e0149a libperf: Add a perf_cpu_map__set_nr() available as an internal function for tools/perf to use
1f94479edb4decdc libperf: Make perf_cpu_map__alloc() available as an internal function for tools/perf to use
7bb1d048bdfe1c7d perf cpumap: Use perf_cpu_map__nr(cpus) to access cpus->nr
4e8db2d7520f780f perf map: Add map__refcnt() accessor to use in the maps test
984abd349d0f76d4 perf scripts python intel-pt-events: Delete unused 'event_attr variable
eab5051788f6111a perf top: Expand the range of multithreaded phase
ed4da0d3de1e1781 tools headers: Remove s390 ptrace.h in check-headers.sh
57f14b5ae1a97537 perf pmu: zfree() expects a pointer to a pointer to zero it after freeing its contents

