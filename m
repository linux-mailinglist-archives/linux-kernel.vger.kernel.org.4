Return-Path: <linux-kernel-owner@vger.kernel.org>
X-Original-To: lists+linux-kernel@lfdr.de
Delivered-To: lists+linux-kernel@lfdr.de
Received: from out1.vger.email (out1.vger.email [IPv6:2620:137:e000::1:20])
	by mail.lfdr.de (Postfix) with ESMTP id AC57071FE14
	for <lists+linux-kernel@lfdr.de>; Fri,  2 Jun 2023 11:41:51 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S235093AbjFBJle (ORCPT <rfc822;lists+linux-kernel@lfdr.de>);
        Fri, 2 Jun 2023 05:41:34 -0400
Received: from lindbergh.monkeyblade.net ([23.128.96.19]:52432 "EHLO
        lindbergh.monkeyblade.net" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S229458AbjFBJl1 (ORCPT
        <rfc822;linux-kernel@vger.kernel.org>);
        Fri, 2 Jun 2023 05:41:27 -0400
Received: from EUR01-DB5-obe.outbound.protection.outlook.com (mail-db5eur01on2087.outbound.protection.outlook.com [40.107.15.87])
        by lindbergh.monkeyblade.net (Postfix) with ESMTPS id 3C583E7;
        Fri,  2 Jun 2023 02:41:23 -0700 (PDT)
ARC-Seal: i=1; a=rsa-sha256; s=arcselector9901; d=microsoft.com; cv=none;
 b=BUDHJheDK2zJ39hA3irWEONb/9L+0x7j1NF1SZtsDcrMuf6hlvJYNdbkRxQLeH3KJg/6Pw/KHFtc0kl+UvYJgk6/Hk67T1MaPVDfEQwcbdzeyIzMABvSHtpb78YDpwHTHZiPbU5MP212OpYmfVEes85zAsBcZPHLm+t8LGbi1EZsWI+ay4gSd/Ddt68Yl9No457FnlRXF1HLsLPnXFaer7dNWSVGwzHaJyOsW8bem4YwmOnHu2miv1M3+OApUUF86M4k+x2lTCFMo9b59X5WPW1EKpGmXl6PKPdzcbM11yAQHBWVJi6e59Sm2yV7ktPpP8vwHdEMHlyHdDEJW2176Q==
ARC-Message-Signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=microsoft.com;
 s=arcselector9901;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-AntiSpam-MessageData-ChunkCount:X-MS-Exchange-AntiSpam-MessageData-0:X-MS-Exchange-AntiSpam-MessageData-1;
 bh=HBJ+kP0ovwnJyPzdHo64efK8SfHEZUczeicV97QsYhw=;
 b=M+IldAx3p+0ScvqTVg0ayIIfo9I4VXbjFJRKVcoYToZSBNVa20aqsegzku38Wq//Ivpta0r+4AljXneTdMCW2U/nhXFGyTR8FadBGP3EM6Wj70fARUZun6JLajmWVgmHok2xxr4yenTL4rVmXP0APQCjrMyUBQEPAvu4CLKCWyoUteMp9a+r7B2JR0livWWGsNvEpbNNKbokgT1vMUScS9jJB/g/gqHlMOpLwg0ErPR+tsnqN3VdJ2TXLliSOGCORyEW0HDTTtnUtnLxP0iMZ0lqSbIhLAOYIG9zLMGl/7Mmq3967SGyS9/wmT73JjkkEThcDYeVAdwpabymhoOjQA==
ARC-Authentication-Results: i=1; mx.microsoft.com 1; spf=pass
 smtp.mailfrom=nxp.com; dmarc=pass action=none header.from=nxp.com; dkim=pass
 header.d=nxp.com; arc=none
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=nxp.com; s=selector2;
 h=From:Date:Subject:Message-ID:Content-Type:MIME-Version:X-MS-Exchange-SenderADCheck;
 bh=HBJ+kP0ovwnJyPzdHo64efK8SfHEZUczeicV97QsYhw=;
 b=Vu2E2apkL92ilSZ7HBoDfR0tShcBss4A3+xVn1i3GKmtKDkCtyZ3/xKrN8Poe3mGEiHcvvchlk+w1UmswqAwOTG+p+yNmowrt6Vkn1Lc1cvUXgP7d07NCeGJ3R2aMuLlYDS+0Tp+YAOqJAJoPVAXNaSbSW27fk8XpCHQbzLVQDI=
Received: from AM6PR04MB5925.eurprd04.prod.outlook.com (2603:10a6:20b:ab::19)
 by DB8PR04MB6924.eurprd04.prod.outlook.com (2603:10a6:10:11e::17) with
 Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id 15.20.6433.26; Fri, 2 Jun
 2023 09:41:19 +0000
Received: from AM6PR04MB5925.eurprd04.prod.outlook.com
 ([fe80::1a8e:7e33:7f24:d77c]) by AM6PR04MB5925.eurprd04.prod.outlook.com
 ([fe80::1a8e:7e33:7f24:d77c%5]) with mapi id 15.20.6455.024; Fri, 2 Jun 2023
 09:41:19 +0000
From:   Joy Zou <joy.zou@nxp.com>
To:     Frank Li <frank.li@nxp.com>, "vkoul@kernel.org" <vkoul@kernel.org>,
        "robh+dt@kernel.org" <robh+dt@kernel.org>,
        "krzysztof.kozlowski+dt@linaro.org" 
        <krzysztof.kozlowski+dt@linaro.org>,
        "dmaengine@vger.kernel.org" <dmaengine@vger.kernel.org>,
        "devicetree@vger.kernel.org" <devicetree@vger.kernel.org>,
        "linux-kernel@vger.kernel.org" <linux-kernel@vger.kernel.org>,
        Peng Fan <peng.fan@nxp.com>,
        Shenwei Wang <shenwei.wang@nxp.com>,
        "imx@lists.linux.dev" <imx@lists.linux.dev>
CC:     Peng Fan <peng.fan@nxp.com>, Aisheng Dong <aisheng.dong@nxp.com>
Subject: RE: [PATCH v3 11/12] dmaengine: fsl-edma: integrate v3 support
Thread-Topic: [PATCH v3 11/12] dmaengine: fsl-edma: integrate v3 support
Thread-Index: AQHZlJc4gSS6UiimFEqTy5ORKxfgmK93QaXQ
Date:   Fri, 2 Jun 2023 09:41:19 +0000
Message-ID: <AM6PR04MB59252F1C1BE15C61911C60EEE14EA@AM6PR04MB5925.eurprd04.prod.outlook.com>
References: <20230601144107.1636833-1-Frank.Li@nxp.com>
 <20230601144107.1636833-12-Frank.Li@nxp.com>
In-Reply-To: <20230601144107.1636833-12-Frank.Li@nxp.com>
Accept-Language: en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
authentication-results: dkim=none (message not signed)
 header.d=none;dmarc=none action=none header.from=nxp.com;
x-ms-publictraffictype: Email
x-ms-traffictypediagnostic: AM6PR04MB5925:EE_|DB8PR04MB6924:EE_
x-ms-office365-filtering-correlation-id: b8910480-c83d-44df-e9f4-08db634d84cc
x-ms-exchange-senderadcheck: 1
x-ms-exchange-antispam-relay: 0
x-microsoft-antispam: BCL:0;
x-microsoft-antispam-message-info: FCIuXEPLf+FxnkKI2TiAD8JYRmNUuEALtksiIkgKLRGzh8O2G9mlO89GwbexSei9MbdAOz8diSsQK/at0FRNpn+LhrZBYH176ABSCDb73P87JcILLKjZaXDmTHgJtMLZjIEEuBtMq5gq7v3RTEOuR9TKwLi1efmVVS9Ky0YG6/RvQK+NadBNZMvuid2F0F2mk2LkGvBnNqmrz834CHTiYdVLE9m2CYXmNWhh9F5eZTio9Aa4Gm0GCoGzuH/nIZgDilhhppjChSajHLqn/LxN7moXZOpmskSQk7ZkI7I8AL9TArCvL6HvGMVvYQfRbFuNRN0N7GZy2D4hnj1QmhWYQc+wz282J3TNeP+xgFYPD29uzgUb7fN4VY4KBia4psHJeXXGcNuOOSgG8xZfhoIB9qAKaqisfeU1vmUy3UeFxJjrHZ4m14OY9UG3xcwUPGMuVLQLrxORJW8OTWX9Zv3HmliduVz2cYvqjlioOBakO6hbV+2nh7WDdcXPUVrhimaKSoP8tG3MY2WcUAh15AOooLu0KXTlrTS9lqiu1Vn4T+6JZJQAHP/cyCukOfdLplWpZ4nra2mGz2DiVJrh3J2TDN1y2fTd8WGvEitPGiq4qo88A0XsU6NzIzXboR90+Y+tDi9CoMj7dF+b/FGhX5dA9w==
x-forefront-antispam-report: CIP:255.255.255.255;CTRY:;LANG:en;SCL:1;SRV:;IPV:NLI;SFV:NSPM;H:AM6PR04MB5925.eurprd04.prod.outlook.com;PTR:;CAT:NONE;SFS:(13230028)(4636009)(396003)(376002)(346002)(136003)(39860400002)(366004)(451199021)(30864003)(9686003)(6506007)(53546011)(26005)(186003)(7696005)(71200400001)(83380400001)(41300700001)(44832011)(316002)(2906002)(52536014)(5660300002)(8936002)(8676002)(478600001)(4326008)(66556008)(76116006)(66946007)(66476007)(64756008)(66446008)(110136005)(33656002)(55016003)(54906003)(86362001)(38070700005)(122000001)(38100700002)(921005)(559001)(579004);DIR:OUT;SFP:1101;
x-ms-exchange-antispam-messagedata-chunkcount: 1
x-ms-exchange-antispam-messagedata-0: =?gb2312?B?UjRXaVhnRDVTeTErbUhLUnBScTlXNElkdmFCNUVHaWJabVBGNk5NblBqczQw?=
 =?gb2312?B?VkQ2WHlrRzQ0QlFPSVJlZHdHVHJhT1E0SGVHcStBZ09Rd0NPOCtDdmY4dm1H?=
 =?gb2312?B?L25JTml3Y0xUZ0RGdmJiT1pCK0Q2WXV3VTd4NDFwVFR3eWVEQjFkZlY4aW14?=
 =?gb2312?B?Z0hSZm9kRXl2K01waDZuRUIwdk5EYTVyYkR0NWlMbWd5akV3UnZhcHZjdlUw?=
 =?gb2312?B?TDE1ZVNtNHVETFkxRWlOUlhnMXpIVFlvYkZVTXlCY2w1SEV3bmxhV3BqR2g5?=
 =?gb2312?B?SlorZjJlU2hNNWFwb3dXYVNLaks5UWxzdTRWZTAxbCtsdTdoZXFVSis0dk1P?=
 =?gb2312?B?bFE3a2lUMmw1b1lDblUvM1FVaFRWRnhWdXlYM0RtaThCTU9vMms5Vk9qUEpo?=
 =?gb2312?B?Qk5FM2VicWdIY0lrZGxTQUxFZi9TU1hDbUtnb05SRHM3b2VvMFpnMCt3Z1l3?=
 =?gb2312?B?YVZLOXB4N0ZCRnlRTHplVGE4Rnp3QWEyZEFVQTNTRU9rUi9nMVl3K2Y1UVF4?=
 =?gb2312?B?QzBCWDRwQVEzV29Db1JZL04ramZmTlk0OC9QRWpLemNOY2toYlRxaCticFRU?=
 =?gb2312?B?OHRtVlE0bDBPTEI4V2xtWEliSFBuOTVGbG8xREJ4azl6NEtheDB0T1NsQmNE?=
 =?gb2312?B?L2RmRUxkS01YbmZJaWRoYkFHL0ZuTXU2cjdPMHhtMnpSVC9Pb3QvMkJ3Nzk3?=
 =?gb2312?B?aHNWY1g3cXgyeWVZZ2F2ZHlabTdDVnhjZXdiN1hna1BwWG5ZYjc3NStOMTRH?=
 =?gb2312?B?SG41T25peWlDQm1HeVhQY0M1NVV2U0JNRXJKTkp6OHBiZkdtV052NFd4QzNi?=
 =?gb2312?B?MzliUnVnbURxNE42bUhUNmpBYTFxQThUa0RhU2d4bVl2Rm1yekdPT25IV1VM?=
 =?gb2312?B?TXc1bG1BQXErZUFFdTFPYWJraUtzaUxoY1grMU5KclFFOU5EbzJhQ00zYmxG?=
 =?gb2312?B?ZUw1cDZQNnFBczVXaEZiRzJPa2Y2dXBCakxoeDJNcDAxbnRpY2krVXdrRndm?=
 =?gb2312?B?N3BTYjZuY2QzV25POWU2RytXNzJib01neFF3Q01saFZlUlNod1MrVWFKTDNP?=
 =?gb2312?B?YWVWK1BDaVg4WkcxTXlEM2JsYWJoMy9VclQ1QXFmOTlWR29GMnJNVnhGeFQr?=
 =?gb2312?B?UjBsc3ROSC9kRjhhUkwzSnhOOG1RM3R6VUpOZGgrOVU4MUZXWjM5OUtLMzRq?=
 =?gb2312?B?bzU3RGthcUhzYXEzb2t2Mi9FWUlpT1QvOXErbXBSWVcvUkpLT3YrNFN2QTYz?=
 =?gb2312?B?QmdLd0ZUUlRTTEZYa1FFdEhIK0xYOWlqTm1LdHV3U0JwY0wwak84ZXJZdS8v?=
 =?gb2312?B?TGVHeksrbTkrdDhBdGx0ZVZGUHR5S3dITlJPaGUzUUZzTmJHU29MSGwycUhl?=
 =?gb2312?B?dGVUUU9zejNMYmRPQnBhanVOR1IvbTN3dS8vdmg1SnptQUFVN2NCVEluTUYz?=
 =?gb2312?B?bTJ4aXNlUmZWSWhaYWFNTE1HTTh1TkpKL1F6eFhkbHZqT1crU0VBNFNvMHJX?=
 =?gb2312?B?VFVHMGduK0ZKR3RoU0VjSVJ4R3VTbkVRbEdCMDRUT01FdHdUZjF1aEtWVEVa?=
 =?gb2312?B?MXhhckFIM0JaYTI4Z0ppUlNOUElvRWdZYmwvejdLTnNMN2NpVkxtc2hTZEVZ?=
 =?gb2312?B?bi9ZWWlrZWhKLzE5T20xNURHZm0wYjVZeW80bUxJTzlvbWFGQnU4akV0UVI1?=
 =?gb2312?B?VCtGK2lhL1luM09FMnV4U1E5QnZwajY4NG5JbnRZK2JhUzYrTndEY2ZYRHlj?=
 =?gb2312?B?L0hYWkxiVUpJWEdzeXdKRXVnM0ZDYzFiNXA4UXBlR1pTZ0VsL05DNWJ1bDh2?=
 =?gb2312?B?em15bjRHb1dlUHEzS0xtYXZZbXAyUXA4MGZFNlg2V1BJLzQ2VHFXbmNhRk9r?=
 =?gb2312?B?YUJ4OHdIMVhkSUJ5L3FZYlRwTVdFWnJaK1htVHJiZWJpcHhLSm9keGRVUGJX?=
 =?gb2312?B?SDh2NVRYdTQyWWlSa0xoMm5aZHFOSGFRbnl0N3NaQU5KYm1Nd3JKa1lnOVFT?=
 =?gb2312?B?TWNyeXBMSG1GSXFBSE1HOTZPclpSZXpmUzlHbjlpQ2U0Mkw3NTFrb2IxdFRi?=
 =?gb2312?B?eDJJc2xjS2RyUGlVNUVMY2UwaWpwcjIxMlMzOE5xNDh0ME4vKzZLU1pBWVlK?=
 =?gb2312?Q?o5ZQ=3D?=
Content-Type: text/plain; charset="gb2312"
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-OriginatorOrg: nxp.com
X-MS-Exchange-CrossTenant-AuthAs: Internal
X-MS-Exchange-CrossTenant-AuthSource: AM6PR04MB5925.eurprd04.prod.outlook.com
X-MS-Exchange-CrossTenant-Network-Message-Id: b8910480-c83d-44df-e9f4-08db634d84cc
X-MS-Exchange-CrossTenant-originalarrivaltime: 02 Jun 2023 09:41:19.4466
 (UTC)
X-MS-Exchange-CrossTenant-fromentityheader: Hosted
X-MS-Exchange-CrossTenant-id: 686ea1d3-bc2b-4c6f-a92c-d99c5c301635
X-MS-Exchange-CrossTenant-mailboxtype: HOSTED
X-MS-Exchange-CrossTenant-userprincipalname: WBFWkgVmm3IxiEMr1pevuSmWUwl+67IdDs6QCnEKtkudHq0L7F0slnBBq8dt0x9d
X-MS-Exchange-Transport-CrossTenantHeadersStamped: DB8PR04MB6924
X-Spam-Status: No, score=-2.1 required=5.0 tests=BAYES_00,DKIM_SIGNED,
        DKIM_VALID,DKIM_VALID_AU,DKIM_VALID_EF,RCVD_IN_DNSWL_NONE,
        RCVD_IN_MSPIKE_H2,SPF_HELO_PASS,SPF_PASS,T_SCC_BODY_TEXT_LINE,
        URIBL_BLOCKED autolearn=ham autolearn_force=no version=3.4.6
X-Spam-Checker-Version: SpamAssassin 3.4.6 (2021-04-09) on
        lindbergh.monkeyblade.net
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

DQo+IC0tLS0tT3JpZ2luYWwgTWVzc2FnZS0tLS0tDQo+IEZyb206IEZyYW5rIExpIDxmcmFuay5s
aUBueHAuY29tPg0KPiBTZW50OiAyMDIzxOo21MIxyNUgMjI6NDENCj4gVG86IHZrb3VsQGtlcm5l
bC5vcmc7IHJvYmgrZHRAa2VybmVsLm9yZzsga3J6eXN6dG9mLmtvemxvd3NraStkdEBsaW5hcm8u
b3JnOw0KPiBkbWFlbmdpbmVAdmdlci5rZXJuZWwub3JnOyBkZXZpY2V0cmVlQHZnZXIua2VybmVs
Lm9yZzsNCj4gbGludXgta2VybmVsQHZnZXIua2VybmVsLm9yZzsgUGVuZyBGYW4gPHBlbmcuZmFu
QG54cC5jb20+OyBKb3kgWm91DQo+IDxqb3kuem91QG54cC5jb20+OyBTaGVud2VpIFdhbmcgPHNo
ZW53ZWkud2FuZ0BueHAuY29tPjsNCj4gaW14QGxpc3RzLmxpbnV4LmRldg0KPiBTdWJqZWN0OiBb
UEFUQ0ggdjMgMTEvMTJdIGRtYWVuZ2luZTogZnNsLWVkbWE6IGludGVncmF0ZSB2MyBzdXBwb3J0
DQo+IA0KPiBTaWduaWZpY2FudCBhbHRlcmF0aW9ucyBoYXZlIGJlZW4gbWFkZSB0byB0aGUgRURN
QSB2MydzIHJlZ2lzdGVyIGxheW91dC4NCj4gTm93LCBlYWNoIGNoYW5uZWwgcG9zc2Vzc2VzIGEg
c2VwYXJhdGUgYWRkcmVzcyBzcGFjZSwgZW5jYXBzdWxhdGluZyBhbGwNCj4gY2hhbm5lbC1yZWxh
dGVkIGNvbnRyb2xzIGFuZCBzdGF0dXNlcywgaW5jbHVkaW5nIElSUXMuIFRoZXJlIGFyZSBjaGFu
Z2VzIGluIGJpdA0KPiBwb3NpdGlvbiBkZWZpbml0aW9ucyBhcyB3ZWxsLiBIb3dldmVyLCB0aGUg
ZnVuZGFtZW50YWwgY29udHJvbCBmbG93IHJlbWFpbnMNCj4gYW5hbG9nb3VzIHRvIHRoZSBwcmV2
aW91cyB2ZXJzaW9ucy4NCj4gDQo+IEVETUEgdjMgd2FzIHV0aWxpemVkIGluIGlteDhxbSwgaW14
OTMsIGFuZCB3aWxsIGJlIGluIGZvcnRoY29taW5nIGNoaXBzLg0KPiANCj4gU2lnbmVkLW9mZi1i
eTogRnJhbmsgTGkgPEZyYW5rLkxpQG54cC5jb20+DQo+IC0tLQ0KPiAgZHJpdmVycy9kbWEvZnNs
LWVkbWEtY29tbW9uLmMgfCAxNTggKysrKysrKysrKysrKysrKysrKy0tLQ0KPiBkcml2ZXJzL2Rt
YS9mc2wtZWRtYS1jb21tb24uaCB8ICA3NSArKysrKysrKysrDQo+ICBkcml2ZXJzL2RtYS9mc2wt
ZWRtYS1tYWluLmMgICB8IDI0OA0KPiArKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKy0t
DQo+ICAzIGZpbGVzIGNoYW5nZWQsIDQ1NiBpbnNlcnRpb25zKCspLCAyNSBkZWxldGlvbnMoLSkN
Cj4gDQo+IGRpZmYgLS1naXQgYS9kcml2ZXJzL2RtYS9mc2wtZWRtYS1jb21tb24uYw0KPiBiL2Ry
aXZlcnMvZG1hL2ZzbC1lZG1hLWNvbW1vbi5jIGluZGV4IGVlYWQ2YTQ3NjVmNy4uZGJmYzlkODBl
MmVkDQo+IDEwMDY0NA0KPiAtLS0gYS9kcml2ZXJzL2RtYS9mc2wtZWRtYS1jb21tb24uYw0KPiAr
KysgYi9kcml2ZXJzL2RtYS9mc2wtZWRtYS1jb21tb24uYw0KPiBAQCAtNyw2ICs3LDggQEANCj4g
ICNpbmNsdWRlIDxsaW51eC9tb2R1bGUuaD4NCj4gICNpbmNsdWRlIDxsaW51eC9zbGFiLmg+DQo+
ICAjaW5jbHVkZSA8bGludXgvZG1hLW1hcHBpbmcuaD4NCj4gKyNpbmNsdWRlIDxsaW51eC9wbV9y
dW50aW1lLmg+DQo+ICsjaW5jbHVkZSA8bGludXgvcG1fZG9tYWluLmg+DQo+IA0KPiAgI2luY2x1
ZGUgImZzbC1lZG1hLWNvbW1vbi5oIg0KPiANCj4gQEAgLTY2LDExICs2OCw0NyBAQCB2b2lkIGZz
bF9lZG1hX3R4X2NoYW5faGFuZGxlcihzdHJ1Y3QgZnNsX2VkbWFfY2hhbg0KPiAqZnNsX2NoYW4p
DQo+ICAJc3Bpbl91bmxvY2soJmZzbF9jaGFuLT52Y2hhbi5sb2NrKTsNCj4gIH0NCj4gDQo+ICtz
dGF0aWMgdm9pZCBmc2xfZWRtYTNfZW5hYmxlX3JlcXVlc3Qoc3RydWN0IGZzbF9lZG1hX2NoYW4g
KmZzbF9jaGFuKSB7DQo+ICsJdTMyIHZhbCwgZmxhZ3M7DQo+ICsNCj4gKwlmbGFncyA9IGZzbF9l
ZG1hX2RydmZsYWdzKGZzbF9jaGFuKTsNCj4gKwl2YWwgPSBlZG1hX3JlYWRsX2NocmVnKGZzbF9j
aGFuLCBjaF9zYnIpOw0KPiArCS8qIFJlbW90ZS9sb2NhbCBzd2FwcGVkIHdyb25nbHkgb24gaU1Y
OCBRTSBBdWRpbyBlZG1hICovDQo+ICsJaWYgKGZsYWdzICYgRlNMX0VETUFfRFJWX1FVSVJLX1NX
QVBQRUQpIHsNCj4gKwkJaWYgKCFmc2xfY2hhbi0+aXNfcnhjaGFuKQ0KPiArCQkJdmFsIHw9IEVE
TUFfVjNfQ0hfU0JSX1JEOw0KPiArCQllbHNlDQo+ICsJCQl2YWwgfD0gRURNQV9WM19DSF9TQlJf
V1I7DQo+ICsJfSBlbHNlIHsNCj4gKwkJaWYgKGZzbF9jaGFuLT5pc19yeGNoYW4pDQo+ICsJCQl2
YWwgfD0gRURNQV9WM19DSF9TQlJfUkQ7DQo+ICsJCWVsc2UNCj4gKwkJCXZhbCB8PSBFRE1BX1Yz
X0NIX1NCUl9XUjsNCj4gKwl9DQo+ICsNCj4gKwlpZiAoZnNsX2NoYW4tPmlzX3JlbW90ZSkNCj4g
KwkJdmFsICY9IH4oRURNQV9WM19DSF9TQlJfUkQgfCBFRE1BX1YzX0NIX1NCUl9XUik7DQo+ICsN
Cj4gKwllZG1hX3dyaXRlbF9jaHJlZyhmc2xfY2hhbiwgdmFsLCBjaF9zYnIpOw0KPiArDQo+ICsJ
aWYgKChmbGFncyAmIChGU0xfRURNQV9EUlZfQVhJIHwgRlNMX0VETUFfRFJWX0hBU19DSE1VWCkp
ICYmDQo+ICsJICAgIGZzbF9jaGFuLT5zcmNpZCAmJiAhZWRtYV9yZWFkbF9jaHJlZyhmc2xfY2hh
biwgY2hfbXV4KSkNCj4gKwkJZWRtYV93cml0ZWxfY2hyZWcoZnNsX2NoYW4sIGZzbF9jaGFuLT5z
cmNpZCwgY2hfbXV4KTsNCj4gKw0KPiArCXZhbCA9IGVkbWFfcmVhZGxfY2hyZWcoZnNsX2NoYW4s
IGNoX2Nzcik7DQo+ICsJdmFsIHw9IEVETUFfVjNfQ0hfQ1NSX0VSUTsNCj4gKwllZG1hX3dyaXRl
bF9jaHJlZyhmc2xfY2hhbiwgdmFsLCBjaF9jc3IpOyB9DQo+ICsNCj4gIHN0YXRpYyB2b2lkIGZz
bF9lZG1hX2VuYWJsZV9yZXF1ZXN0KHN0cnVjdCBmc2xfZWRtYV9jaGFuICpmc2xfY2hhbikgIHsN
Cj4gIAlzdHJ1Y3QgZWRtYV9yZWdzICpyZWdzID0gJmZzbF9jaGFuLT5lZG1hLT5yZWdzOw0KPiAg
CXUzMiBjaCA9IGZzbF9jaGFuLT52Y2hhbi5jaGFuLmNoYW5faWQ7DQo+IA0KPiArCWlmIChmc2xf
ZWRtYV9kcnZmbGFncyhmc2xfY2hhbikgJiBGU0xfRURNQV9EUlZfU1BMSVRfUkVHKQ0KPiArCQly
ZXR1cm4gZnNsX2VkbWEzX2VuYWJsZV9yZXF1ZXN0KGZzbF9jaGFuKTsNCj4gKw0KPiAgCWlmIChm
c2xfY2hhbi0+ZWRtYS0+ZHJ2ZGF0YS0+ZmxhZ3MgJiBGU0xfRURNQV9EUlZfV1JBUF9JTykgew0K
PiAgCQllZG1hX3dyaXRlYihmc2xfY2hhbi0+ZWRtYSwgRURNQV9TRUVJX1NFRUkoY2gpLCByZWdz
LT5zZWVpKTsNCj4gIAkJZWRtYV93cml0ZWIoZnNsX2NoYW4tPmVkbWEsIGNoLCByZWdzLT5zZXJx
KTsgQEAgLTgzLDExICsxMjEsMjkNCj4gQEAgc3RhdGljIHZvaWQgZnNsX2VkbWFfZW5hYmxlX3Jl
cXVlc3Qoc3RydWN0IGZzbF9lZG1hX2NoYW4gKmZzbF9jaGFuKQ0KPiAgCX0NCj4gIH0NCj4gDQo+
ICtzdGF0aWMgdm9pZCBmc2xfZWRtYTNfZGlzYWJsZV9yZXF1ZXN0KHN0cnVjdCBmc2xfZWRtYV9j
aGFuICpmc2xfY2hhbikgew0KPiArCXUzMiB2YWwgPSBlZG1hX3JlYWRsX2NocmVnKGZzbF9jaGFu
LCBjaF9jc3IpOw0KPiArCXUzMiBmbGFnczsNCj4gKw0KPiArCWZsYWdzID0gZnNsX2VkbWFfZHJ2
ZmxhZ3MoZnNsX2NoYW4pOw0KPiArDQo+ICsJaWYgKChmbGFncyAmIChGU0xfRURNQV9EUlZfQVhJ
IHwgRlNMX0VETUFfRFJWX0hBU19DSE1VWCkpICYmDQo+ICsJICAgIGZzbF9jaGFuLT5zcmNpZCkN
Cj4gKwkJZWRtYV93cml0ZWxfY2hyZWcoZnNsX2NoYW4sIDAsIGNoX211eCk7DQo+ICsNCj4gKwl2
YWwgJj0gfkVETUFfVjNfQ0hfQ1NSX0VSUTsNCj4gKwllZG1hX3dyaXRlbF9jaHJlZyhmc2xfY2hh
biwgdmFsLCBjaF9jc3IpOyB9DQo+ICsNCj4gIHZvaWQgZnNsX2VkbWFfZGlzYWJsZV9yZXF1ZXN0
KHN0cnVjdCBmc2xfZWRtYV9jaGFuICpmc2xfY2hhbikgIHsNCj4gIAlzdHJ1Y3QgZWRtYV9yZWdz
ICpyZWdzID0gJmZzbF9jaGFuLT5lZG1hLT5yZWdzOw0KPiAgCXUzMiBjaCA9IGZzbF9jaGFuLT52
Y2hhbi5jaGFuLmNoYW5faWQ7DQo+IA0KPiArCWlmIChmc2xfZWRtYV9kcnZmbGFncyhmc2xfY2hh
bikgJiBGU0xfRURNQV9EUlZfU1BMSVRfUkVHKQ0KPiArCQlyZXR1cm4gZnNsX2VkbWEzX2Rpc2Fi
bGVfcmVxdWVzdChmc2xfY2hhbik7DQo+ICsNCj4gIAlpZiAoZnNsX2NoYW4tPmVkbWEtPmRydmRh
dGEtPmZsYWdzICYgRlNMX0VETUFfRFJWX1dSQVBfSU8pIHsNCj4gIAkJZWRtYV93cml0ZWIoZnNs
X2NoYW4tPmVkbWEsIGNoLCByZWdzLT5jZXJxKTsNCj4gIAkJZWRtYV93cml0ZWIoZnNsX2NoYW4t
PmVkbWEsIEVETUFfQ0VFSV9DRUVJKGNoKSwgcmVncy0+Y2VlaSk7DQo+IEBAIC0xODYsNiArMjQy
LDEwIEBAIGludCBmc2xfZWRtYV90ZXJtaW5hdGVfYWxsKHN0cnVjdCBkbWFfY2hhbiAqY2hhbikN
Cj4gIAl2Y2hhbl9nZXRfYWxsX2Rlc2NyaXB0b3JzKCZmc2xfY2hhbi0+dmNoYW4sICZoZWFkKTsN
Cj4gIAlzcGluX3VubG9ja19pcnFyZXN0b3JlKCZmc2xfY2hhbi0+dmNoYW4ubG9jaywgZmxhZ3Mp
Ow0KPiAgCXZjaGFuX2RtYV9kZXNjX2ZyZWVfbGlzdCgmZnNsX2NoYW4tPnZjaGFuLCAmaGVhZCk7
DQo+ICsNCj4gKwlpZiAoZnNsX2VkbWFfZHJ2ZmxhZ3MoZnNsX2NoYW4pICYgRlNMX0VETUFfRFJW
X0hBU19QRCkNCj4gKwkJcG1fcnVudGltZV9hbGxvdyhmc2xfY2hhbi0+cGRfZGV2KTsNCj4gKw0K
PiAgCXJldHVybiAwOw0KPiAgfQ0KPiANCj4gQEAgLTI4NiwxMiArMzQ2LDE2IEBAIHN0YXRpYyBz
aXplX3QgZnNsX2VkbWFfZGVzY19yZXNpZHVlKHN0cnVjdA0KPiBmc2xfZWRtYV9jaGFuICpmc2xf
Y2hhbiwNCj4gIAllbnVtIGRtYV90cmFuc2Zlcl9kaXJlY3Rpb24gZGlyID0gZWRlc2MtPmRpcm47
DQo+ICAJZG1hX2FkZHJfdCBjdXJfYWRkciwgZG1hX2FkZHI7DQo+ICAJc2l6ZV90IGxlbiwgc2l6
ZTsNCj4gKwl1MzIgbmJ5dGVzID0gMDsNCj4gIAlpbnQgaTsNCj4gDQo+ICAJLyogY2FsY3VsYXRl
IHRoZSB0b3RhbCBzaXplIGluIHRoaXMgZGVzYyAqLw0KPiAtCWZvciAobGVuID0gaSA9IDA7IGkg
PCBmc2xfY2hhbi0+ZWRlc2MtPm5fdGNkczsgaSsrKQ0KPiAtCQlsZW4gKz0gbGUzMl90b19jcHUo
ZWRlc2MtPnRjZFtpXS52dGNkLT5uYnl0ZXMpDQo+IC0JCQkqIGxlMTZfdG9fY3B1KGVkZXNjLT50
Y2RbaV0udnRjZC0+Yml0ZXIpOw0KPiArCWZvciAobGVuID0gaSA9IDA7IGkgPCBmc2xfY2hhbi0+
ZWRlc2MtPm5fdGNkczsgaSsrKSB7DQo+ICsJCW5ieXRlcyA9IGxlMzJfdG9fY3B1KGVkZXNjLT50
Y2RbaV0udnRjZC0+bmJ5dGVzKTsNCj4gKwkJaWYgKG5ieXRlcyAmIChFRE1BX1YzX1RDRF9OQllU
RVNfRE1MT0UgfA0KPiBFRE1BX1YzX1RDRF9OQllURVNfU01MT0UpKQ0KPiArCQkJbmJ5dGVzID0g
RURNQV9WM19UQ0RfTkJZVEVTX01MT0ZGX05CWVRFUyhuYnl0ZXMpOw0KPiArCQlsZW4gKz0gbmJ5
dGVzICogbGUxNl90b19jcHUoZWRlc2MtPnRjZFtpXS52dGNkLT5iaXRlcik7DQo+ICsJfQ0KPiAN
Cj4gIAlpZiAoIWluX3Byb2dyZXNzKQ0KPiAgCQlyZXR1cm4gbGVuOw0KPiBAQCAtMzAzLDggKzM2
NywxMiBAQCBzdGF0aWMgc2l6ZV90IGZzbF9lZG1hX2Rlc2NfcmVzaWR1ZShzdHJ1Y3QNCj4gZnNs
X2VkbWFfY2hhbiAqZnNsX2NoYW4sDQo+IA0KPiAgCS8qIGZpZ3VyZSBvdXQgdGhlIGZpbmlzaGVk
IGFuZCBjYWxjdWxhdGUgdGhlIHJlc2lkdWUgKi8NCj4gIAlmb3IgKGkgPSAwOyBpIDwgZnNsX2No
YW4tPmVkZXNjLT5uX3RjZHM7IGkrKykgew0KPiAtCQlzaXplID0gbGUzMl90b19jcHUoZWRlc2Mt
PnRjZFtpXS52dGNkLT5uYnl0ZXMpDQo+IC0JCQkqIGxlMTZfdG9fY3B1KGVkZXNjLT50Y2RbaV0u
dnRjZC0+Yml0ZXIpOw0KPiArCQluYnl0ZXMgPSBsZTMyX3RvX2NwdShlZGVzYy0+dGNkW2ldLnZ0
Y2QtPm5ieXRlcyk7DQo+ICsJCWlmIChuYnl0ZXMgJiAoRURNQV9WM19UQ0RfTkJZVEVTX0RNTE9F
IHwNCj4gRURNQV9WM19UQ0RfTkJZVEVTX1NNTE9FKSkNCj4gKwkJCW5ieXRlcyA9IEVETUFfVjNf
VENEX05CWVRFU19NTE9GRl9OQllURVMobmJ5dGVzKTsNCj4gKw0KPiArCQlzaXplID0gbmJ5dGVz
ICogbGUxNl90b19jcHUoZWRlc2MtPnRjZFtpXS52dGNkLT5iaXRlcik7DQo+ICsNCj4gIAkJaWYg
KGRpciA9PSBETUFfTUVNX1RPX0RFVikNCj4gIAkJCWRtYV9hZGRyID0gbGUzMl90b19jcHUoZWRl
c2MtPnRjZFtpXS52dGNkLT5zYWRkcik7DQo+ICAJCWVsc2UNCj4gQEAgLTM4OSwxMyArNDU3LDE1
IEBAIHN0YXRpYyB2b2lkIGZzbF9lZG1hX3NldF90Y2RfcmVncyhzdHJ1Y3QNCj4gZnNsX2VkbWFf
Y2hhbiAqZnNsX2NoYW4sICB9DQo+IA0KPiAgc3RhdGljIGlubGluZQ0KPiAtdm9pZCBmc2xfZWRt
YV9maWxsX3RjZChzdHJ1Y3QgZnNsX2VkbWFfaHdfdGNkICp0Y2QsIHUzMiBzcmMsIHUzMiBkc3Qs
DQo+ICt2b2lkIGZzbF9lZG1hX2ZpbGxfdGNkKHN0cnVjdCBmc2xfZWRtYV9jaGFuICpmc2xfY2hh
biwNCj4gKwkJICAgICAgIHN0cnVjdCBmc2xfZWRtYV9od190Y2QgKnRjZCwgdTMyIHNyYywgdTMy
IGRzdCwNCj4gIAkJICAgICAgIHUxNiBhdHRyLCB1MTYgc29mZiwgdTMyIG5ieXRlcywgdTMyIHNs
YXN0LCB1MTYgY2l0ZXIsDQo+ICAJCSAgICAgICB1MTYgYml0ZXIsIHUxNiBkb2ZmLCB1MzIgZGxh
c3Rfc2dhLCBib29sIG1ham9yX2ludCwNCj4gIAkJICAgICAgIGJvb2wgZGlzYWJsZV9yZXEsIGJv
b2wgZW5hYmxlX3NnKSAgew0KPiArCXN0cnVjdCBkbWFfc2xhdmVfY29uZmlnICpjZmcgPSAmZnNs
X2NoYW4tPmNmZzsNCj4gIAl1MTYgY3NyID0gMDsNCj4gLQ0KPiArCXUzMiBidXJzdDsNCj4gIAkv
Kg0KPiAgCSAqIGVETUEgaGFyZHdhcmUgU0dzIHJlcXVpcmUgdGhlIFRDRHMgdG8gYmUgc3RvcmVk
IGluIGxpdHRsZQ0KPiAgCSAqIGVuZGlhbiBmb3JtYXQgaXJyZXNwZWN0aXZlIG9mIHRoZSByZWdp
c3RlciBlbmRpYW4gbW9kZWwuDQo+IEBAIC00MDksNiArNDc5LDIxIEBAIHZvaWQgZnNsX2VkbWFf
ZmlsbF90Y2Qoc3RydWN0IGZzbF9lZG1hX2h3X3RjZCAqdGNkLA0KPiB1MzIgc3JjLCB1MzIgZHN0
LA0KPiANCj4gIAl0Y2QtPnNvZmYgPSBjcHVfdG9fbGUxNihzb2ZmKTsNCj4gDQo+ICsJaWYgKGZz
bF9jaGFuLT5pc19tdWx0aV9maWZvKSB7DQo+ICsJCS8qIHNldCBtbG9mZiB0byBzdXBwb3J0IG11
bHRpcGxlIGZpZm8gKi8NCj4gKwkJYnVyc3QgPSBjZmctPmRpcmVjdGlvbiA9PSBETUFfREVWX1RP
X01FTSA/DQo+ICsJCQkJY2ZnLT5zcmNfYWRkcl93aWR0aCA6IGNmZy0+ZHN0X2FkZHJfd2lkdGg7
DQo+ICsJCW5ieXRlcyB8PSBFRE1BX1YzX1RDRF9OQllURVNfTUxPRkYoLShidXJzdCAqIDQpKTsN
Cj4gKwkJLyogZW5hYmxlIERNTE9FL1NNTE9FICovDQo+ICsJCWlmIChjZmctPmRpcmVjdGlvbiA9
PSBETUFfTUVNX1RPX0RFVikgew0KPiArCQkJbmJ5dGVzIHw9IEVETUFfVjNfVENEX05CWVRFU19E
TUxPRTsNCj4gKwkJCW5ieXRlcyAmPSB+RURNQV9WM19UQ0RfTkJZVEVTX1NNTE9FOw0KPiArCQl9
IGVsc2Ugew0KPiArCQkJbmJ5dGVzIHw9IEVETUFfVjNfVENEX05CWVRFU19TTUxPRTsNCj4gKwkJ
CW5ieXRlcyAmPSB+RURNQV9WM19UQ0RfTkJZVEVTX0RNTE9FOw0KPiArCQl9DQo+ICsJfQ0KPiAr
DQo+ICAJdGNkLT5uYnl0ZXMgPSBjcHVfdG9fbGUzMihuYnl0ZXMpOw0KPiAgCXRjZC0+c2xhc3Qg
PSBjcHVfdG9fbGUzMihzbGFzdCk7DQo+IA0KPiBAQCAtNDI3LDYgKzUxMiwxMiBAQCB2b2lkIGZz
bF9lZG1hX2ZpbGxfdGNkKHN0cnVjdCBmc2xfZWRtYV9od190Y2QgKnRjZCwNCj4gdTMyIHNyYywg
dTMyIGRzdCwNCj4gIAlpZiAoZW5hYmxlX3NnKQ0KPiAgCQljc3IgfD0gRURNQV9UQ0RfQ1NSX0Vf
U0c7DQo+IA0KPiArCWlmIChmc2xfY2hhbi0+aXNfcnhjaGFuKQ0KPiArCQljc3IgfD0gRURNQV9U
Q0RfQ1NSX0FDVElWRTsNCj4gKw0KPiArCWlmIChmc2xfY2hhbi0+aXNfc3cpDQo+ICsJCWNzciB8
PSBFRE1BX1RDRF9DU1JfU1RBUlQ7DQo+ICsNCj4gIAl0Y2QtPmNzciA9IGNwdV90b19sZTE2KGNz
cik7DQo+ICB9DQo+IA0KPiBAQCAtNDY2LDYgKzU1Nyw3IEBAIHN0cnVjdCBkbWFfYXN5bmNfdHhf
ZGVzY3JpcHRvcg0KPiAqZnNsX2VkbWFfcHJlcF9kbWFfY3ljbGljKA0KPiAgCXN0cnVjdCBmc2xf
ZWRtYV9jaGFuICpmc2xfY2hhbiA9IHRvX2ZzbF9lZG1hX2NoYW4oY2hhbik7DQo+ICAJc3RydWN0
IGZzbF9lZG1hX2Rlc2MgKmZzbF9kZXNjOw0KPiAgCWRtYV9hZGRyX3QgZG1hX2J1Zl9uZXh0Ow0K
PiArCWJvb2wgbWFqb3JfaW50ID0gdHJ1ZTsNCj4gIAlpbnQgc2dfbGVuLCBpOw0KPiAgCXUzMiBz
cmNfYWRkciwgZHN0X2FkZHIsIGxhc3Rfc2csIG5ieXRlczsNCj4gIAl1MTYgc29mZiwgZG9mZiwg
aXRlcjsNCj4gQEAgLTUwOSwxNyArNjAxLDIzIEBAIHN0cnVjdCBkbWFfYXN5bmNfdHhfZGVzY3Jp
cHRvcg0KPiAqZnNsX2VkbWFfcHJlcF9kbWFfY3ljbGljKA0KPiAgCQkJc3JjX2FkZHIgPSBkbWFf
YnVmX25leHQ7DQo+ICAJCQlkc3RfYWRkciA9IGZzbF9jaGFuLT5kbWFfZGV2X2FkZHI7DQo+ICAJ
CQlzb2ZmID0gZnNsX2NoYW4tPmNmZy5kc3RfYWRkcl93aWR0aDsNCj4gLQkJCWRvZmYgPSAwOw0K
PiAtCQl9IGVsc2Ugew0KPiArCQkJZG9mZiA9IGZzbF9jaGFuLT5pc19tdWx0aV9maWZvID8gNCA6
IDA7DQo+ICsJCX0gZWxzZSBpZiAoZGlyZWN0aW9uID09IERNQV9ERVZfVE9fTUVNKSB7DQo+ICAJ
CQlzcmNfYWRkciA9IGZzbF9jaGFuLT5kbWFfZGV2X2FkZHI7DQo+ICAJCQlkc3RfYWRkciA9IGRt
YV9idWZfbmV4dDsNCj4gLQkJCXNvZmYgPSAwOw0KPiArCQkJc29mZiA9IGZzbF9jaGFuLT5pc19t
dWx0aV9maWZvID8gNCA6IDA7DQo+ICAJCQlkb2ZmID0gZnNsX2NoYW4tPmNmZy5zcmNfYWRkcl93
aWR0aDsNCj4gKwkJfSBlbHNlIHsNCj4gKwkJCS8qIERNQV9ERVZfVE9fREVWICovDQo+ICsJCQlz
cmNfYWRkciA9IGZzbF9jaGFuLT5jZmcuc3JjX2FkZHI7DQo+ICsJCQlkc3RfYWRkciA9IGZzbF9j
aGFuLT5jZmcuZHN0X2FkZHI7DQo+ICsJCQlzb2ZmID0gZG9mZiA9IDA7DQo+ICsJCQltYWpvcl9p
bnQgPSBmYWxzZTsNCj4gIAkJfQ0KPiANCj4gLQkJZnNsX2VkbWFfZmlsbF90Y2QoZnNsX2Rlc2Mt
PnRjZFtpXS52dGNkLCBzcmNfYWRkciwgZHN0X2FkZHIsDQo+ICsJCWZzbF9lZG1hX2ZpbGxfdGNk
KGZzbF9jaGFuLCBmc2xfZGVzYy0+dGNkW2ldLnZ0Y2QsIHNyY19hZGRyLA0KPiArZHN0X2FkZHIs
DQo+ICAJCQkJICBmc2xfY2hhbi0+YXR0ciwgc29mZiwgbmJ5dGVzLCAwLCBpdGVyLA0KPiAtCQkJ
CSAgaXRlciwgZG9mZiwgbGFzdF9zZywgdHJ1ZSwgZmFsc2UsIHRydWUpOw0KPiArCQkJCSAgaXRl
ciwgZG9mZiwgbGFzdF9zZywgbWFqb3JfaW50LCBmYWxzZSwgdHJ1ZSk7DQo+ICAJCWRtYV9idWZf
bmV4dCArPSBwZXJpb2RfbGVuOw0KPiAgCX0NCj4gDQo+IEBAIC01NjgsMjMgKzY2Niw1MSBAQCBz
dHJ1Y3QgZG1hX2FzeW5jX3R4X2Rlc2NyaXB0b3INCj4gKmZzbF9lZG1hX3ByZXBfc2xhdmVfc2co
DQo+ICAJCQlkc3RfYWRkciA9IGZzbF9jaGFuLT5kbWFfZGV2X2FkZHI7DQo+ICAJCQlzb2ZmID0g
ZnNsX2NoYW4tPmNmZy5kc3RfYWRkcl93aWR0aDsNCj4gIAkJCWRvZmYgPSAwOw0KPiAtCQl9IGVs
c2Ugew0KPiArCQl9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PSBETUFfREVWX1RPX01FTSkgew0KPiAg
CQkJc3JjX2FkZHIgPSBmc2xfY2hhbi0+ZG1hX2Rldl9hZGRyOw0KPiAgCQkJZHN0X2FkZHIgPSBz
Z19kbWFfYWRkcmVzcyhzZyk7DQo+ICAJCQlzb2ZmID0gMDsNCj4gIAkJCWRvZmYgPSBmc2xfY2hh
bi0+Y2ZnLnNyY19hZGRyX3dpZHRoOw0KPiArCQl9IGVsc2Ugew0KPiArCQkJLyogRE1BX0RFVl9U
T19ERVYgKi8NCj4gKwkJCXNyY19hZGRyID0gZnNsX2NoYW4tPmNmZy5zcmNfYWRkcjsNCj4gKwkJ
CWRzdF9hZGRyID0gZnNsX2NoYW4tPmNmZy5kc3RfYWRkcjsNCj4gKwkJCXNvZmYgPSAwOw0KPiAr
CQkJZG9mZiA9IDA7DQo+ICAJCX0NCj4gDQo+ICsJCS8qDQo+ICsJCSAqIENob29zZSB0aGUgc3Vp
dGFibGUgYnVyc3QgbGVuZ3RoIGlmIHNnX2RtYV9sZW4gaXMgbm90DQo+ICsJCSAqIG11bHRpcGxl
IG9mIGJ1cnN0IGxlbmd0aCBzbyB0aGF0IHRoZSB3aG9sZSB0cmFuc2ZlciBsZW5ndGggaXMNCj4g
KwkJICogbXVsdGlwbGUgb2YgbWlub3IgbG9vcChidXJzdCBsZW5ndGgpLg0KPiArCQkgKi8NCj4g
KwkJaWYgKHNnX2RtYV9sZW4oc2cpICUgbmJ5dGVzKSB7DQo+ICsJCQl1MzIgd2lkdGggPSAoZGly
ZWN0aW9uID09IERNQV9ERVZfVE9fTUVNKSA/IGRvZmYgOiBzb2ZmOw0KPiArCQkJdTMyIGJ1cnN0
ID0gKGRpcmVjdGlvbiA9PSBETUFfREVWX1RPX01FTSkgPw0KPiArCQkJCQkJZnNsX2NoYW4tPmNm
Zy5zcmNfbWF4YnVyc3QgOg0KPiArCQkJCQkJZnNsX2NoYW4tPmNmZy5kc3RfbWF4YnVyc3Q7DQo+
ICsJCQlpbnQgajsNCj4gKw0KPiArCQkJZm9yIChqID0gYnVyc3Q7IGogPiAxOyBqLS0pIHsNCj4g
KwkJCQlpZiAoIShzZ19kbWFfbGVuKHNnKSAlIChqICogd2lkdGgpKSkgew0KPiArCQkJCQluYnl0
ZXMgPSBqICogd2lkdGg7DQo+ICsJCQkJCWJyZWFrOw0KPiArCQkJCX0NCj4gKwkJCX0NCj4gKwkJ
CS8qIFNldCBidXJzdCBzaXplIGFzIDEgaWYgdGhlcmUncyBubyBzdWl0YWJsZSBvbmUgKi8NCj4g
KwkJCWlmIChqID09IDEpDQo+ICsJCQkJbmJ5dGVzID0gd2lkdGg7DQo+ICsJCX0NCj4gIAkJaXRl
ciA9IHNnX2RtYV9sZW4oc2cpIC8gbmJ5dGVzOw0KPiAgCQlpZiAoaSA8IHNnX2xlbiAtIDEpIHsN
Cj4gIAkJCWxhc3Rfc2cgPSBmc2xfZGVzYy0+dGNkWyhpICsgMSldLnB0Y2Q7DQo+IC0JCQlmc2xf
ZWRtYV9maWxsX3RjZChmc2xfZGVzYy0+dGNkW2ldLnZ0Y2QsIHNyY19hZGRyLA0KPiArCQkJZnNs
X2VkbWFfZmlsbF90Y2QoZnNsX2NoYW4sIGZzbF9kZXNjLT50Y2RbaV0udnRjZCwgc3JjX2FkZHIs
DQo+ICAJCQkJCSAgZHN0X2FkZHIsIGZzbF9jaGFuLT5hdHRyLCBzb2ZmLA0KPiAgCQkJCQkgIG5i
eXRlcywgMCwgaXRlciwgaXRlciwgZG9mZiwgbGFzdF9zZywNCj4gIAkJCQkJICBmYWxzZSwgZmFs
c2UsIHRydWUpOw0KPiAgCQl9IGVsc2Ugew0KPiAgCQkJbGFzdF9zZyA9IDA7DQo+IC0JCQlmc2xf
ZWRtYV9maWxsX3RjZChmc2xfZGVzYy0+dGNkW2ldLnZ0Y2QsIHNyY19hZGRyLA0KPiArCQkJZnNs
X2VkbWFfZmlsbF90Y2QoZnNsX2NoYW4sIGZzbF9kZXNjLT50Y2RbaV0udnRjZCwgc3JjX2FkZHIs
DQo+ICAJCQkJCSAgZHN0X2FkZHIsIGZzbF9jaGFuLT5hdHRyLCBzb2ZmLA0KPiAgCQkJCQkgIG5i
eXRlcywgMCwgaXRlciwgaXRlciwgZG9mZiwgbGFzdF9zZywNCj4gIAkJCQkJICB0cnVlLCB0cnVl
LCBmYWxzZSk7DQo+IEBAIC02MDksNyArNzM1LDcgQEAgc3RydWN0IGRtYV9hc3luY190eF9kZXNj
cmlwdG9yDQo+ICpmc2xfZWRtYV9wcmVwX21lbWNweShzdHJ1Y3QgZG1hX2NoYW4gKmNoYW4sDQo+
ICAJZnNsX2NoYW4tPmlzX3N3ID0gdHJ1ZTsNCj4gDQo+ICAJLyogVG8gbWF0Y2ggd2l0aCBjb3B5
X2FsaWduIGFuZCBtYXhfc2VnX3NpemUgc28gMSB0Y2QgaXMgZW5vdWdoICovDQo+IC0JZnNsX2Vk
bWFfZmlsbF90Y2QoZnNsX2Rlc2MtPnRjZFswXS52dGNkLCBkbWFfc3JjLCBkbWFfZHN0LA0KPiAr
CWZzbF9lZG1hX2ZpbGxfdGNkKGZzbF9jaGFuLCBmc2xfZGVzYy0+dGNkWzBdLnZ0Y2QsIGRtYV9z
cmMsIGRtYV9kc3QsDQo+ICAJCQlmc2xfZWRtYV9nZXRfdGNkX2F0dHIoRE1BX1NMQVZFX0JVU1dJ
RFRIXzMyX0JZVEVTKSwNCj4gIAkJCTMyLCBsZW4sIDAsIDEsIDEsIDMyLCAwLCB0cnVlLCB0cnVl
LCBmYWxzZSk7DQo+IA0KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9kbWEvZnNsLWVkbWEtY29tbW9u
LmgNCj4gYi9kcml2ZXJzL2RtYS9mc2wtZWRtYS1jb21tb24uaCBpbmRleCBjZmM0MTkxNWVhYTEu
LmQ0YWMyNjQ0NjU0ZQ0KPiAxMDA2NDQNCj4gLS0tIGEvZHJpdmVycy9kbWEvZnNsLWVkbWEtY29t
bW9uLmgNCj4gKysrIGIvZHJpdmVycy9kbWEvZnNsLWVkbWEtY29tbW9uLmgNCj4gQEAgLTQyLDYg
KzQyLDExIEBADQo+ICAjZGVmaW5lIEVETUFfVENEX0NTUl9BQ1RJVkUJCUJJVCg2KQ0KPiAgI2Rl
ZmluZSBFRE1BX1RDRF9DU1JfRE9ORQkJQklUKDcpDQo+IA0KPiArI2RlZmluZSBFRE1BX1YzX1RD
RF9OQllURVNfTUxPRkZfTkJZVEVTKHgpICgoeCkgJiBHRU5NQVNLKDksIDApKQ0KPiArI2RlZmlu
ZSBFRE1BX1YzX1RDRF9OQllURVNfTUxPRkYoeCkgICAgICAgICh4IDw8IDEwKQ0KPiArI2RlZmlu
ZSBFRE1BX1YzX1RDRF9OQllURVNfRE1MT0UgICAgICAgICAgICgxIDw8IDMwKQ0KPiArI2RlZmlu
ZSBFRE1BX1YzX1RDRF9OQllURVNfU01MT0UgICAgICAgICAgICgxIDw8IDMxKQ0KPiArDQo+ICAj
ZGVmaW5lIEVETUFNVVhfQ0hDRkdfRElTCQkweDANCj4gICNkZWZpbmUgRURNQU1VWF9DSENGR19F
TkJMCQkweDgwDQo+ICAjZGVmaW5lIEVETUFNVVhfQ0hDRkdfU09VUkNFKG4pCQkoKG4pICYgMHgz
RikNCj4gQEAgLTU0LDYgKzU5LDE1IEBADQo+ICAJCQkJIEJJVChETUFfU0xBVkVfQlVTV0lEVEhf
Ml9CWVRFUykgfCBcDQo+ICAJCQkJIEJJVChETUFfU0xBVkVfQlVTV0lEVEhfNF9CWVRFUykgfCBc
DQo+ICAJCQkJIEJJVChETUFfU0xBVkVfQlVTV0lEVEhfOF9CWVRFUykpDQo+ICsNCj4gKyNkZWZp
bmUgRURNQV9WM19DSF9TQlJfUkQgICAgICAgICAgQklUKDIyKQ0KPiArI2RlZmluZSBFRE1BX1Yz
X0NIX1NCUl9XUiAgICAgICAgICBCSVQoMjEpDQo+ICsjZGVmaW5lIEVETUFfVjNfQ0hfQ1NSX0VS
USAgICAgICAgIEJJVCgwKQ0KPiArI2RlZmluZSBFRE1BX1YzX0NIX0NTUl9FQVJRICAgICAgICBC
SVQoMSkNCj4gKyNkZWZpbmUgRURNQV9WM19DSF9DU1JfRUVJICAgICAgICAgQklUKDIpDQo+ICsj
ZGVmaW5lIEVETUFfVjNfQ0hfQ1NSX0RPTkUgICAgICAgIEJJVCgzMCkNCj4gKyNkZWZpbmUgRURN
QV9WM19DSF9DU1JfQUNUSVZFICAgICAgQklUKDMxKQ0KPiArDQo+ICBlbnVtIGZzbF9lZG1hX3Bt
X3N0YXRlIHsNCj4gIAlSVU5OSU5HID0gMCwNCj4gIAlTVVNQRU5ERUQsDQo+IEBAIC03Myw2ICs4
NywxOCBAQCBzdHJ1Y3QgZnNsX2VkbWFfaHdfdGNkIHsNCj4gIAlfX2xlMTYJYml0ZXI7DQo+ICB9
Ow0KPiANCj4gK3N0cnVjdCBmc2xfZWRtYTNfY2hfcmVnIHsNCj4gKwlfX2xlMzIJY2hfY3NyOw0K
PiArCV9fbGUzMgljaF9lczsNCj4gKwlfX2xlMzIJY2hfaW50Ow0KPiArCV9fbGUzMgljaF9zYnI7
DQo+ICsJX19sZTMyCWNoX3ByaTsNCj4gKwlfX2xlMzIJY2hfbXV4Ow0KPiArCV9fbGUzMiAgY2hf
bWF0dHI7IC8qIGVkbWE0LCByZXNlcnZlZCBmb3IgZWRtYTMgKi8NCj4gKwlfX2xlMzIgIGNoX3Jl
c2VydmVkOw0KPiArCXN0cnVjdCBmc2xfZWRtYV9od190Y2QgdGNkOw0KPiArfSBfX3BhY2tlZDsN
Cj4gKw0KPiAgLyoNCj4gICAqIFRoZXNlIGFyZSBpb21lbSBwb2ludGVycywgZm9yIGJvdGggdjMy
IGFuZCB2NjQuDQo+ICAgKi8NCj4gQEAgLTExOSw2ICsxNDUsMTggQEAgc3RydWN0IGZzbF9lZG1h
X2NoYW4gew0KPiAgCWVudW0gZG1hX2RhdGFfZGlyZWN0aW9uCQlkbWFfZGlyOw0KPiAgCWNoYXIJ
CQkJY2hhbl9uYW1lWzMyXTsNCj4gIAlzdHJ1Y3QgZnNsX2VkbWFfaHdfdGNkIF9faW9tZW0gKnRj
ZDsNCj4gKwl1MzIJCQkJcmVhbF9jb3VudDsNCj4gKwlzdHJ1Y3Qgd29ya19zdHJ1Y3QJCWlzc3Vl
X3dvcmtlcjsNCj4gKwlzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlCQkqcGRldjsNCj4gKwlzdHJ1Y3Qg
ZGV2aWNlCQkJKnBkX2RldjsNCj4gKwl1MzIJCQkJc3JjaWQ7DQo+ICsJc3RydWN0IGNsawkJCSpj
bGs7DQo+ICsJaW50ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmlvcml0eTsNCj4gKwlp
bnQJCQkJaHdfY2hhbmlkOw0KPiArCWludAkJCQl0eGlycTsNCj4gKwlib29sCQkJCWlzX3J4Y2hh
bjsNCj4gKwlib29sCQkJCWlzX3JlbW90ZTsNCj4gKwlib29sCQkJCWlzX211bHRpX2ZpZm87DQo+
ICB9Ow0KPiANCj4gIHN0cnVjdCBmc2xfZWRtYV9kZXNjIHsNCj4gQEAgLTEzNSw4ICsxNzMsMzAg
QEAgc3RydWN0IGZzbF9lZG1hX2Rlc2Mgew0KPiAgI2RlZmluZSBGU0xfRURNQV9EUlZfQ09ORklH
MzIJCUJJVCgyKQ0KPiAgI2RlZmluZSBGU0xfRURNQV9EUlZfV1JBUF9JTwkJQklUKDMpDQo+ICAj
ZGVmaW5lIEZTTF9FRE1BX0RSVl9FRE1BNjQJCUJJVCg0KQ0KPiArI2RlZmluZSBGU0xfRURNQV9E
UlZfSEFTX1BECQlCSVQoNSkNCj4gKyNkZWZpbmUgRlNMX0VETUFfRFJWX0hBU19DSENMSwkJQklU
KDYpDQo+ICsjZGVmaW5lIEZTTF9FRE1BX0RSVl9IQVNfQ0hNVVgJCUJJVCg3KQ0KPiArLyogaW14
OCBRTSBhdWRpbyBlZG1hIHJlbW90ZSBsb2NhbCBzd2FwcGVkICovDQo+ICsjZGVmaW5lIEZTTF9F
RE1BX0RSVl9RVUlSS19TV0FQUEVECUJJVCg4KQ0KPiArLyogaW14OTMgZWRtYTQgaXMgQVhJIG1h
c3RlciAqLw0KPiArI2RlZmluZSBGU0xfRURNQV9EUlZfQVhJCQlCSVQoOSkNCj4gKy8qIGNvbnRy
b2wgYW5kIHN0YXR1cyByZWdpc3RlciBpcyBpbiB0Y2QgYWRkcmVzcyBzcGFjZSwgZWRtYTMgcmVn
IGxheW91dCAqLw0KPiArI2RlZmluZSBGU0xfRURNQV9EUlZfU1BMSVRfUkVHCQlCSVQoMTApDQo+
ICsjZGVmaW5lIEZTTF9FRE1BX0RSVl9CVVNfOEJZVEUJCUJJVCgxMSkNCj4gKyNkZWZpbmUgRlNM
X0VETUFfRFJWX0RFVl9UT19ERVYJCUJJVCgxMikNCj4gKyNkZWZpbmUgRlNMX0VETUFfRFJWX0FM
SUdOXzY0QllURQlCSVQoMTMpDQo+ICsNCj4gKyNkZWZpbmUgRlNMX0VETUFfRFJWX0VETUEzCShG
U0xfRURNQV9EUlZfU1BMSVRfUkVHIHwJXA0KPiArCQkJCSBGU0xfRURNQV9EUlZfQlVTXzhCWVRF
IHwJXA0KPiArCQkJCSBGU0xfRURNQV9EUlZfREVWX1RPX0RFViB8CVwNCj4gKwkJCQkgRlNMX0VE
TUFfRFJWX0FMSUdOXzY0QllURSkNCj4gKw0KPiArI2RlZmluZSBGU0xfRURNQV9EUlZfRURNQTQJ
KEZTTF9FRE1BX0RSVl9FRE1BMyB8CQlcDQo+ICsJCQkJIEZTTF9FRE1BX0RSVl9BWEkpDQo+ICBz
dHJ1Y3QgZnNsX2VkbWFfZHJ2ZGF0YSB7DQo+ICAJdTMyCQkJZG1hbXV4czsNCj4gKwl1MzIJCQlj
aHJlZ19vZmY7DQo+ICsJdTMyCQkJY2hyZWdfc3BhY2Vfc3o7DQo+ICAJdTMyCQkJZmxhZ3M7DQo+
ICAJaW50CQkJKCpzZXR1cF9pcnEpKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYsDQo+ICAJ
CQkJCSAgICAgc3RydWN0IGZzbF9lZG1hX2VuZ2luZSAqZnNsX2VkbWEpOyBAQCAtMTQ4LDYNCj4g
KzIwOCw3IEBAIHN0cnVjdCBmc2xfZWRtYV9lbmdpbmUgew0KPiAgCXZvaWQgX19pb21lbQkJKm11
eGJhc2VbRE1BTVVYX05SXTsNCj4gIAlzdHJ1Y3QgY2xrCQkqbXV4Y2xrW0RNQU1VWF9OUl07DQo+
ICAJc3RydWN0IGNsawkJKmRtYWNsazsNCj4gKwlzdHJ1Y3QgY2xrCQkqY2hjbGs7DQo+ICAJc3Ry
dWN0IG11dGV4CQlmc2xfZWRtYV9tdXRleDsNCj4gIAljb25zdCBzdHJ1Y3QgZnNsX2VkbWFfZHJ2
ZGF0YSAqZHJ2ZGF0YTsNCj4gIAl1MzIJCQluX2NoYW5zOw0KPiBAQCAtMTU1LDYgKzIxNiw3IEBA
IHN0cnVjdCBmc2xfZWRtYV9lbmdpbmUgew0KPiAgCWludAkJCWVycmlycTsNCj4gIAlib29sCQkJ
YmlnX2VuZGlhbjsNCj4gIAlzdHJ1Y3QgZWRtYV9yZWdzCXJlZ3M7DQo+ICsJdTY0CQkJY2hhbl9t
YXNrZWQ7DQo+ICAJc3RydWN0IGZzbF9lZG1hX2NoYW4JY2hhbnNbXTsNCj4gIH07DQo+IA0KPiBA
QCAtMTY4LDYgKzIzMCwxNCBAQCBzdHJ1Y3QgZnNsX2VkbWFfZW5naW5lIHsNCj4gIAllZG1hX3dy
aXRlbChjaGFuLT5lZG1hLCAodTMyIF9fZm9yY2UpdmFsLCAmY2hhbi0+dGNkLT5fX25hbWUpIDoJ
XA0KPiAgCWVkbWFfd3JpdGV3KGNoYW4tPmVkbWEsICh1MTYgX19mb3JjZSl2YWwsICZjaGFuLT50
Y2QtPl9fbmFtZSkpDQo+IA0KPiArI2RlZmluZSBlZG1hX3JlYWRsX2NocmVnKGNoYW4sIF9fbmFt
ZSkJCQkJXA0KPiArCWVkbWFfcmVhZGwoY2hhbi0+ZWRtYSwJCQkJCVwNCj4gKwkJICAgKHZvaWQg
X19pb21lbSAqKSYoY29udGFpbmVyX29mKGNoYW4tPnRjZCwgc3RydWN0DQo+IGZzbF9lZG1hM19j
aF9yZWcsDQo+ICt0Y2QpLT5fX25hbWUpKQ0KPiArDQo+ICsjZGVmaW5lIGVkbWFfd3JpdGVsX2No
cmVnKGNoYW4sIHZhbCwgIF9fbmFtZSkJCQlcDQo+ICsJZWRtYV93cml0ZWwoY2hhbi0+ZWRtYSwg
dmFsLAkJCQlcDQo+ICsJCSAgICh2b2lkIF9faW9tZW0gKikmKGNvbnRhaW5lcl9vZihjaGFuLT50
Y2QsIHN0cnVjdA0KPiBmc2xfZWRtYTNfY2hfcmVnLA0KPiArdGNkKS0+X19uYW1lKSkNCj4gKw0K
PiAgLyoNCj4gICAqIFIvVyBmdW5jdGlvbnMgZm9yIGJpZy0gb3IgbGl0dGxlLWVuZGlhbiByZWdp
c3RlcnM6DQo+ICAgKiBUaGUgZURNQSBjb250cm9sbGVyJ3MgZW5kaWFuIGlzIGluZGVwZW5kZW50
IG9mIHRoZSBDUFUgY29yZSdzIGVuZGlhbi4NCj4gQEAgLTIyNCw2ICsyOTQsMTEgQEAgc3RhdGlj
IGlubGluZSBzdHJ1Y3QgZnNsX2VkbWFfY2hhbg0KPiAqdG9fZnNsX2VkbWFfY2hhbihzdHJ1Y3Qg
ZG1hX2NoYW4gKmNoYW4pDQo+ICAJcmV0dXJuIGNvbnRhaW5lcl9vZihjaGFuLCBzdHJ1Y3QgZnNs
X2VkbWFfY2hhbiwgdmNoYW4uY2hhbik7ICB9DQo+IA0KPiArc3RhdGljIGlubGluZSB1MzIgZnNs
X2VkbWFfZHJ2ZmxhZ3Moc3RydWN0IGZzbF9lZG1hX2NoYW4gKmZzbF9jaGFuKSB7DQo+ICsJcmV0
dXJuIGZzbF9jaGFuLT5lZG1hLT5kcnZkYXRhLT5mbGFnczsgfQ0KPiArDQo+ICBzdGF0aWMgaW5s
aW5lIHN0cnVjdCBmc2xfZWRtYV9kZXNjICp0b19mc2xfZWRtYV9kZXNjKHN0cnVjdCB2aXJ0X2Rt
YV9kZXNjDQo+ICp2ZCkgIHsNCj4gIAlyZXR1cm4gY29udGFpbmVyX29mKHZkLCBzdHJ1Y3QgZnNs
X2VkbWFfZGVzYywgdmRlc2MpOyBkaWZmIC0tZ2l0DQo+IGEvZHJpdmVycy9kbWEvZnNsLWVkbWEt
bWFpbi5jIGIvZHJpdmVycy9kbWEvZnNsLWVkbWEtbWFpbi5jIGluZGV4DQo+IGU1ZjQyZGQ5NzRl
OC4uMzMzMzlhZGU3OWE0IDEwMDY0NA0KPiAtLS0gYS9kcml2ZXJzL2RtYS9mc2wtZWRtYS1tYWlu
LmMNCj4gKysrIGIvZHJpdmVycy9kbWEvZnNsLWVkbWEtbWFpbi5jDQo+IEBAIC0xOCw5ICsxOCwx
NSBAQA0KPiAgI2luY2x1ZGUgPGxpbnV4L29mX2lycS5oPg0KPiAgI2luY2x1ZGUgPGxpbnV4L29m
X2RtYS5oPg0KPiAgI2luY2x1ZGUgPGxpbnV4L2RtYS1tYXBwaW5nLmg+DQo+ICsjaW5jbHVkZSA8
bGludXgvcG1fcnVudGltZS5oPg0KPiArI2luY2x1ZGUgPGxpbnV4L3BtX2RvbWFpbi5oPg0KPiAN
Cj4gICNpbmNsdWRlICJmc2wtZWRtYS1jb21tb24uaCINCj4gDQo+ICsjZGVmaW5lIEFSR1NfUlgg
ICAgICAgICAgICAgICAgICAgICAgICAgQklUKDApDQo+ICsjZGVmaW5lIEFSR1NfUkVNT1RFICAg
ICAgICAgICAgICAgICAgICAgQklUKDEpDQo+ICsjZGVmaW5lIEFSR1NfTVVMVElfRklGTyAgICAg
ICAgICAgICAgICAgQklUKDIpDQo+ICsNCj4gIHN0YXRpYyB2b2lkIGZzbF9lZG1hX3N5bmNocm9u
aXplKHN0cnVjdCBkbWFfY2hhbiAqY2hhbikgIHsNCj4gIAlzdHJ1Y3QgZnNsX2VkbWFfY2hhbiAq
ZnNsX2NoYW4gPSB0b19mc2xfZWRtYV9jaGFuKGNoYW4pOyBAQCAtNDcsNg0KPiArNTMsMjIgQEAg
c3RhdGljIGlycXJldHVybl90IGZzbF9lZG1hX3R4X2hhbmRsZXIoaW50IGlycSwgdm9pZCAqZGV2
X2lkKQ0KPiAgCXJldHVybiBJUlFfSEFORExFRDsNCj4gIH0NCj4gDQo+ICtzdGF0aWMgaXJxcmV0
dXJuX3QgZnNsX2VkbWEzX3R4X2hhbmRsZXIoaW50IGlycSwgdm9pZCAqZGV2X2lkKSB7DQo+ICsJ
c3RydWN0IGZzbF9lZG1hX2NoYW4gKmZzbF9jaGFuID0gZGV2X2lkOw0KPiArCXVuc2lnbmVkIGlu
dCBpbnRyOw0KPiArDQo+ICsJaW50ciA9IGVkbWFfcmVhZGxfY2hyZWcoZnNsX2NoYW4sIGNoX2lu
dCk7DQo+ICsJaWYgKCFpbnRyKQ0KPiArCQlyZXR1cm4gSVJRX0hBTkRMRUQ7DQo+ICsNCj4gKwll
ZG1hX3dyaXRlbF9jaHJlZyhmc2xfY2hhbiwgMSwgY2hfaW50KTsNCj4gKw0KPiArCWZzbF9lZG1h
X3R4X2NoYW5faGFuZGxlcihmc2xfY2hhbik7DQo+ICsNCj4gKwlyZXR1cm4gSVJRX0hBTkRMRUQ7
DQo+ICt9DQo+ICsNCj4gIHN0YXRpYyBpcnFyZXR1cm5fdCBmc2xfZWRtYV9lcnJfaGFuZGxlcihp
bnQgaXJxLCB2b2lkICpkZXZfaWQpICB7DQo+ICAJc3RydWN0IGZzbF9lZG1hX2VuZ2luZSAqZnNs
X2VkbWEgPSBkZXZfaWQ7IEBAIC0xMDgsNiArMTMwLDUyIEBADQo+IHN0YXRpYyBzdHJ1Y3QgZG1h
X2NoYW4gKmZzbF9lZG1hX3hsYXRlKHN0cnVjdCBvZl9waGFuZGxlX2FyZ3MgKmRtYV9zcGVjLA0K
PiAgCXJldHVybiBOVUxMOw0KPiAgfQ0KPiANCj4gK3N0YXRpYyBzdHJ1Y3QgZG1hX2NoYW4gKmZz
bF9lZG1hM194bGF0ZShzdHJ1Y3Qgb2ZfcGhhbmRsZV9hcmdzICpkbWFfc3BlYywNCj4gKwkJCQkJ
c3RydWN0IG9mX2RtYSAqb2ZkbWEpDQo+ICt7DQo+ICsJc3RydWN0IGZzbF9lZG1hX2VuZ2luZSAq
ZnNsX2VkbWEgPSBvZmRtYS0+b2ZfZG1hX2RhdGE7DQo+ICsJc3RydWN0IGRtYV9jaGFuICpjaGFu
LCAqX2NoYW47DQo+ICsJc3RydWN0IGZzbF9lZG1hX2NoYW4gKmZzbF9jaGFuOw0KPiArCWludCBp
Ow0KPiArDQo+ICsJaWYgKGRtYV9zcGVjLT5hcmdzX2NvdW50ICE9IDMpDQo+ICsJCXJldHVybiBO
VUxMOw0KPiArDQo+ICsJbXV0ZXhfbG9jaygmZnNsX2VkbWEtPmZzbF9lZG1hX211dGV4KTsNCj4g
KwlsaXN0X2Zvcl9lYWNoX2VudHJ5X3NhZmUoY2hhbiwgX2NoYW4sICZmc2xfZWRtYS0+ZG1hX2Rl
di5jaGFubmVscywNCj4gKwkJCQkJZGV2aWNlX25vZGUpIHsNCj4gKw0KPiArCQlpZiAoY2hhbi0+
Y2xpZW50X2NvdW50KQ0KPiArCQkJY29udGludWU7DQo+ICsNCj4gKwkJZnNsX2NoYW4gPSB0b19m
c2xfZWRtYV9jaGFuKGNoYW4pOw0KPiArCQlpID0gZnNsX2NoYW4gLSBmc2xfZWRtYS0+Y2hhbnM7
DQo+ICsJCWlmIChmc2xfZWRtYS0+ZHJ2ZGF0YS0+ZG1hbXV4cyA9PSAwICYmIGkgPT0gZG1hX3Nw
ZWMtPmFyZ3NbMF0pIHsNCj4gKwkJCWNoYW4gPSBkbWFfZ2V0X3NsYXZlX2NoYW5uZWwoY2hhbik7
DQo+ICsJCQljaGFuLT5kZXZpY2UtPnByaXZhdGVjbnQrKzsNCj4gKwkJCWZzbF9jaGFuLT5wcmlv
cml0eSA9IGRtYV9zcGVjLT5hcmdzWzFdOw0KPiArCQkJZnNsX2NoYW4tPmlzX3J4Y2hhbiA9IGRt
YV9zcGVjLT5hcmdzWzJdICYgQVJHU19SWDsNCj4gKwkJCWZzbF9jaGFuLT5pc19yZW1vdGUgPSBk
bWFfc3BlYy0+YXJnc1syXSAmIEFSR1NfUkVNT1RFOw0KPiArCQkJZnNsX2NoYW4tPmlzX211bHRp
X2ZpZm8gPSBkbWFfc3BlYy0+YXJnc1syXSAmDQo+IEFSR1NfTVVMVElfRklGTzsNCj4gKwkJCW11
dGV4X3VubG9jaygmZnNsX2VkbWEtPmZzbF9lZG1hX211dGV4KTsNCj4gKwkJCXJldHVybiBjaGFu
Ow0KPiArCQl9IGVsc2UgaWYgKChmc2xfZWRtYS0+ZHJ2ZGF0YS0+ZG1hbXV4cyB8fA0KPiArCQkJ
ICAgKGZzbF9lZG1hLT5kcnZkYXRhLT5mbGFncyAmIEZTTF9FRE1BX0RSVl9BWEkpKQ0KPiAmJiAh
ZnNsX2NoYW4tPnNyY2lkKSB7DQo+ICsJCQljaGFuID0gZG1hX2dldF9zbGF2ZV9jaGFubmVsKGNo
YW4pOw0KPiArCQkJY2hhbi0+ZGV2aWNlLT5wcml2YXRlY250Kys7DQo+ICsJCQlmc2xfY2hhbi0+
cHJpb3JpdHkgPSBkbWFfc3BlYy0+YXJnc1sxXTsNCj4gKwkJCWZzbF9jaGFuLT5zcmNpZCA9IGRt
YV9zcGVjLT5hcmdzWzBdOw0KPiArCQkJZnNsX2NoYW4tPmlzX3J4Y2hhbiA9IGRtYV9zcGVjLT5h
cmdzWzJdICYgQVJHU19SWDsNCj4gKwkJCWZzbF9jaGFuLT5pc19yZW1vdGUgPSBkbWFfc3BlYy0+
YXJnc1syXSAmIEFSR1NfUkVNT1RFOw0KPiArCQkJZnNsX2NoYW4tPmlzX211bHRpX2ZpZm8gPSBk
bWFfc3BlYy0+YXJnc1syXSAmDQo+IEFSR1NfTVVMVElfRklGTzsNCj4gKwkJCW11dGV4X3VubG9j
aygmZnNsX2VkbWEtPmZzbF9lZG1hX211dGV4KTsNCj4gKwkJCXJldHVybiBjaGFuOw0KPiArCQl9
DQo+ICsJfQ0KPiArCW11dGV4X3VubG9jaygmZnNsX2VkbWEtPmZzbF9lZG1hX211dGV4KTsNCj4g
KwlyZXR1cm4gTlVMTDsNCj4gK30NCj4gKw0KPiAgc3RhdGljIGludA0KPiAgZnNsX2VkbWFfaXJx
X2luaXQoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldiwgc3RydWN0IGZzbF9lZG1hX2VuZ2lu
ZQ0KPiAqZnNsX2VkbWEpICB7IEBAIC0xNDksNiArMjE3LDM3IEBAIGZzbF9lZG1hX2lycV9pbml0
KHN0cnVjdA0KPiBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYsIHN0cnVjdCBmc2xfZWRtYV9lbmdpbmUg
KmZzbF9lZG1hDQo+ICAJcmV0dXJuIDA7DQo+ICB9DQo+IA0KPiArc3RhdGljIGludCBmc2xfZWRt
YTNfaXJxX2luaXQoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldiwgc3RydWN0DQo+ICtmc2xf
ZWRtYV9lbmdpbmUgKmZzbF9lZG1hKSB7DQo+ICsJaW50IHJldDsNCj4gKwlpbnQgaTsNCj4gKw0K
PiArCWZvciAoaSA9IDA7IGkgPCBmc2xfZWRtYS0+bl9jaGFuczsgaSsrKSB7DQo+ICsNCj4gKwkJ
c3RydWN0IGZzbF9lZG1hX2NoYW4gKmZzbF9jaGFuID0gJmZzbF9lZG1hLT5jaGFuc1tpXTsNCj4g
Kw0KPiArCQlpZiAoZnNsX2VkbWEtPmNoYW5fbWFza2VkICYgQklUKGkpKQ0KPiArCQkJY29udGlu
dWU7DQo+ICsNCj4gKwkJLyogcmVxdWVzdCBjaGFubmVsIGlycSAqLw0KPiArCQlmc2xfY2hhbi0+
dHhpcnEgPSBwbGF0Zm9ybV9nZXRfaXJxKHBkZXYsIGkpOw0KPiArCQlpZiAoZnNsX2NoYW4tPnR4
aXJxIDwgMCkgew0KPiArCQkJZGV2X2VycigmcGRldi0+ZGV2LCAiQ2FuJ3QgZ2V0IGNoYW4gJWQn
cyBpcnEuXG4iLCBpKTsNCj4gKwkJCXJldHVybiAgLUVJTlZBTDsNCj4gKwkJfQ0KPiArDQo+ICsJ
CXJldCA9IGRldm1fcmVxdWVzdF9pcnEoJnBkZXYtPmRldiwgZnNsX2NoYW4tPnR4aXJxLA0KPiAr
CQkJZnNsX2VkbWEzX3R4X2hhbmRsZXIsIElSUUZfU0hBUkVELA0KPiArCQkJZnNsX2NoYW4tPmNo
YW5fbmFtZSwgZnNsX2NoYW4pOw0KPiArCQlpZiAocmV0KSB7DQo+ICsJCQlkZXZfZXJyKCZwZGV2
LT5kZXYsICJDYW4ndCByZWdpc3RlciBjaGFuJWQncyBJUlEuXG4iLCBpKTsNCj4gKwkJCXJldHVy
biAtRUlOVkFMOw0KPiArCQl9DQo+ICsJfQ0KPiArDQo+ICsJcmV0dXJuIDA7DQo+ICt9DQo+ICsN
Cj4gIHN0YXRpYyBpbnQNCj4gIGZzbF9lZG1hMl9pcnFfaW5pdChzdHJ1Y3QgcGxhdGZvcm1fZGV2
aWNlICpwZGV2LA0KPiAgCQkgICBzdHJ1Y3QgZnNsX2VkbWFfZW5naW5lICpmc2xfZWRtYSkNCj4g
QEAgLTIwMiwyOSArMzAxLDExNSBAQCBzdGF0aWMgdm9pZCBmc2xfZGlzYWJsZV9jbG9ja3Moc3Ry
dWN0DQo+IGZzbF9lZG1hX2VuZ2luZSAqZnNsX2VkbWEsIGludCBucl9jbG9ja3MpDQo+IA0KPiAg
c3RhdGljIHN0cnVjdCBmc2xfZWRtYV9kcnZkYXRhIHZmNjEwX2RhdGEgPSB7DQo+ICAJLmRtYW11
eHMgPSBETUFNVVhfTlIgfCBGU0xfRURNQV9EUlZfV1JBUF9JTywNCj4gKwkuZG1hbXV4cyA9IERN
QU1VWF9OUiwNCj4gKwkuY2hyZWdfb2ZmID0gRURNQV9UQ0QsDQo+ICsJLmNocmVnX3NwYWNlX3N6
ID0gc2l6ZW9mKHN0cnVjdCBmc2xfZWRtYV9od190Y2QpLA0KPiAgCS5zZXR1cF9pcnEgPSBmc2xf
ZWRtYV9pcnFfaW5pdCwNCj4gIH07DQo+IA0KPiAgc3RhdGljIHN0cnVjdCBmc2xfZWRtYV9kcnZk
YXRhIGxzMTAyOGFfZGF0YSA9IHsNCj4gIAkuZG1hbXV4cyA9IERNQU1VWF9OUiwNCj4gIAkuZmxh
Z3MgPSBGU0xfRURNQV9EUlZfTVVYX1NXQVAgfCBGU0xfRURNQV9EUlZfV1JBUF9JTywNCj4gKwku
Y2hyZWdfb2ZmID0gRURNQV9UQ0QsDQo+ICsJLmNocmVnX3NwYWNlX3N6ID0gc2l6ZW9mKHN0cnVj
dCBmc2xfZWRtYV9od190Y2QpLA0KPiAgCS5zZXR1cF9pcnEgPSBmc2xfZWRtYV9pcnFfaW5pdCwN
Cj4gIH07DQo+IA0KPiAgc3RhdGljIHN0cnVjdCBmc2xfZWRtYV9kcnZkYXRhIGlteDd1bHBfZGF0
YSA9IHsNCj4gIAkuZG1hbXV4cyA9IDEsDQo+ICsJLmNocmVnX29mZiA9IEVETUFfVENELA0KPiAr
CS5jaHJlZ19zcGFjZV9zeiA9IHNpemVvZihzdHJ1Y3QgZnNsX2VkbWFfaHdfdGNkKSwNCj4gIAku
ZmxhZ3MgPSBGU0xfRURNQV9EUlZfSEFTX0RNQUNMSyB8IEZTTF9FRE1BX0RSVl9DT05GSUczMiwN
Cj4gIAkuc2V0dXBfaXJxID0gZnNsX2VkbWEyX2lycV9pbml0LA0KPiAgfTsNCj4gDQo+ICtzdGF0
aWMgc3RydWN0IGZzbF9lZG1hX2RydmRhdGEgaW14OHFtX2RhdGEgPSB7DQo+ICsJLmZsYWdzID0g
RlNMX0VETUFfRFJWX0hBU19DSE1VWCB8IEZTTF9FRE1BX0RSVl9IQVNfUEQNCj4gKwkJIHwgRlNM
X0VETUFfRFJWX0VETUEzLA0KPiArCS5jaHJlZ19zcGFjZV9zeiA9IDB4MTAwMDAsDQo+ICsJLmNo
cmVnX29mZiA9IDB4MTAwMDAsDQo+ICsJLnNldHVwX2lycSA9IGZzbF9lZG1hM19pcnFfaW5pdCwN
Cj4gK307DQpIaSBmcmFuaywNClRoZXJlIGFyZSBtYW55IGRtYSBjb250cm9sbGVycyBpbiBpbXg4
cW0uIEJ1dCBub3QgYWxsIGRtYSBjb250cm9sbGVycyBzdXBwb3J0IGNoLW11eC4NCkluIGFkZGl0
aW9uLCBJbXg5MyBlZG1hIHYzIGFsc28gZG9lc24ndCBzdXBwb3J0IGNoLW11eC4NCllvdSBjYW4g
Y29uZmlybSB3aXRoIFJNLiBDYW4gd2UgdXNlIHRoZSBkdHMgbm9kZSBwcm9wZXJ0eSBpbnN0ZWFk
IG9mIGRydmRhdGEgZmxhZ3M/IA0KQlINCkpveSBab3UNCj4gKw0KPiArc3RhdGljIHN0cnVjdCBm
c2xfZWRtYV9kcnZkYXRhIGlteDhxbV9hdWRpb19kYXRhID0gew0KPiArCS5mbGFncyA9IEZTTF9F
RE1BX0RSVl9IQVNfQ0hNVVggfA0KPiBGU0xfRURNQV9EUlZfUVVJUktfU1dBUFBFRCB8DQo+ICsJ
CSBGU0xfRURNQV9EUlZfSEFTX1BEIHwgRlNMX0VETUFfRFJWX0VETUEzLA0KPiArCS5jaHJlZ19z
cGFjZV9zeiA9IDB4MTAwMDAsDQo+ICsJLmNocmVnX29mZiA9IDB4MTAwMDAsDQo+ICsJLnNldHVw
X2lycSA9IGZzbF9lZG1hM19pcnFfaW5pdCwNCj4gK307DQo+ICsNCj4gK3N0YXRpYyBzdHJ1Y3Qg
ZnNsX2VkbWFfZHJ2ZGF0YSBpbXg5M19kYXRhMyA9IHsNCj4gKwkuZmxhZ3MgPSBGU0xfRURNQV9E
UlZfSEFTX0NITVVYIHwgRlNMX0VETUFfRFJWX0hBU19ETUFDTEsNCj4gKwkJIHwgRlNMX0VETUFf
RFJWX0VETUEzLA0KPiArCS5jaHJlZ19zcGFjZV9zeiA9IDB4MTAwMDAsDQo+ICsJLmNocmVnX29m
ZiA9IDB4MTAwMDAsDQo+ICsJLnNldHVwX2lycSA9IGZzbF9lZG1hM19pcnFfaW5pdCwNCj4gK307
DQo+ICsNCj4gK3N0YXRpYyBzdHJ1Y3QgZnNsX2VkbWFfZHJ2ZGF0YSBpbXg5M19kYXRhNCA9IHsN
Cj4gKwkuZmxhZ3MgPSBGU0xfRURNQV9EUlZfSEFTX0NITVVYIHwgRlNMX0VETUFfRFJWX0hBU19E
TUFDTEsNCj4gKwkJIHwgRlNMX0VETUFfRFJWX0VETUE0LA0KPiArCS5jaHJlZ19zcGFjZV9zeiA9
IDB4ODAwMCwNCj4gKwkuY2hyZWdfb2ZmID0gMHgxMDAwMCwNCj4gKwkuc2V0dXBfaXJxID0gZnNs
X2VkbWEzX2lycV9pbml0LA0KPiArfTsNCj4gKw0KPiAgc3RhdGljIGNvbnN0IHN0cnVjdCBvZl9k
ZXZpY2VfaWQgZnNsX2VkbWFfZHRfaWRzW10gPSB7DQo+ICAJeyAuY29tcGF0aWJsZSA9ICJmc2ws
dmY2MTAtZWRtYSIsIC5kYXRhID0gJnZmNjEwX2RhdGF9LA0KPiAgCXsgLmNvbXBhdGlibGUgPSAi
ZnNsLGxzMTAyOGEtZWRtYSIsIC5kYXRhID0gJmxzMTAyOGFfZGF0YX0sDQo+ICAJeyAuY29tcGF0
aWJsZSA9ICJmc2wsaW14N3VscC1lZG1hIiwgLmRhdGEgPSAmaW14N3VscF9kYXRhfSwNCj4gKwl7
IC5jb21wYXRpYmxlID0gImZzbCxpbXg4cW0tZWRtYSIsIC5kYXRhID0gJmlteDhxbV9kYXRhfSwN
Cj4gKwl7IC5jb21wYXRpYmxlID0gImZzbCxpbXg4cW0tYWRtYSIsIC5kYXRhID0gJmlteDhxbV9h
dWRpb19kYXRhfSwNCj4gKwl7IC5jb21wYXRpYmxlID0gImZzbCxpbXg5My1lZG1hMyIsIC5kYXRh
ID0gJmlteDkzX2RhdGEzfSwNCj4gKwl7IC5jb21wYXRpYmxlID0gImZzbCxpbXg5My1lZG1hNCIs
IC5kYXRhID0gJmlteDkzX2RhdGE0fSwNCj4gIAl7IC8qIHNlbnRpbmVsICovIH0NCj4gIH07DQo+
ICsNCj4gIE1PRFVMRV9ERVZJQ0VfVEFCTEUob2YsIGZzbF9lZG1hX2R0X2lkcyk7DQo+IA0KPiAr
c3RhdGljIGludCBmc2xfZWRtYTNfYXR0YWNoX3BkKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBk
ZXYsIHN0cnVjdA0KPiArZnNsX2VkbWFfZW5naW5lICpmc2xfZWRtYSkgew0KPiArCXN0cnVjdCBm
c2xfZWRtYV9jaGFuICpmc2xfY2hhbjsNCj4gKwlzdHJ1Y3QgZGV2aWNlX2xpbmsgKmxpbms7DQo+
ICsJc3RydWN0IGRldmljZSAqcGRfY2hhbjsNCj4gKwlzdHJ1Y3QgZGV2aWNlICpkZXY7DQo+ICsJ
aW50IGk7DQo+ICsNCj4gKwlkZXYgPSAmcGRldi0+ZGV2Ow0KPiArDQo+ICsJZm9yIChpID0gMDsg
aSA8IGZzbF9lZG1hLT5uX2NoYW5zOyBpKyspIHsNCj4gKwkJaWYgKGZzbF9lZG1hLT5jaGFuX21h
c2tlZCAmIEJJVChpKSkNCj4gKwkJCWNvbnRpbnVlOw0KPiArDQo+ICsJCWZzbF9jaGFuID0gJmZz
bF9lZG1hLT5jaGFuc1tpXTsNCj4gKw0KPiArCQlwZF9jaGFuID0gZGV2X3BtX2RvbWFpbl9hdHRh
Y2hfYnlfaWQoZGV2LCBpKTsNCj4gKwkJaWYgKElTX0VSUl9PUl9OVUxMKHBkX2NoYW4pKSB7DQo+
ICsJCQlkZXZfZXJyKGRldiwgIkZhaWxlZCBhdHRhY2ggcGQgJWRcbiIsIGkpOw0KPiArCQkJcmV0
dXJuIC1FSU5WQUw7DQo+ICsJCX0NCj4gKw0KPiArCQlsaW5rID0gZGV2aWNlX2xpbmtfYWRkKGRl
diwgcGRfY2hhbiwgRExfRkxBR19TVEFURUxFU1MgfA0KPiArCQkJCQkgICAgIERMX0ZMQUdfUE1f
UlVOVElNRSB8DQo+ICsJCQkJCSAgICAgRExfRkxBR19SUE1fQUNUSVZFKTsNCj4gKwkJaWYgKElT
X0VSUihsaW5rKSkgew0KPiArCQkJZGV2X2VycihkZXYsICJGYWlsZWQgdG8gYWRkIGRldmljZV9s
aW5rIHRvICVkOiAlbGRcbiIsIGksDQo+ICsJCQkJUFRSX0VSUihsaW5rKSk7DQo+ICsJCQlyZXR1
cm4gLUVJTlZBTDsNCj4gKwkJfQ0KPiArDQo+ICsJCWZzbF9jaGFuLT5wZF9kZXYgPSBwZF9jaGFu
Ow0KPiArDQo+ICsJCXBtX3J1bnRpbWVfdXNlX2F1dG9zdXNwZW5kKGZzbF9jaGFuLT5wZF9kZXYp
Ow0KPiArCQlwbV9ydW50aW1lX3NldF9hdXRvc3VzcGVuZF9kZWxheShmc2xfY2hhbi0+cGRfZGV2
LCAyMDApOw0KPiArCQlwbV9ydW50aW1lX3NldF9hY3RpdmUoZnNsX2NoYW4tPnBkX2Rldik7DQo+
ICsJCS8vcG1fcnVudGltZV9wdXRfc3luY19zdXNwZW5kKGZzbF9jaGFuLT5wZF9kZXYpOw0KPiAr
CX0NCj4gKw0KPiArCXJldHVybiAwOw0KPiArfQ0KPiArDQo+ICBzdGF0aWMgaW50IGZzbF9lZG1h
X3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpICB7DQo+ICAJY29uc3Qgc3RydWN0
IG9mX2RldmljZV9pZCAqb2ZfaWQgPQ0KPiBAQCAtMjYzLDggKzQ0OCwxMCBAQCBzdGF0aWMgaW50
IGZzbF9lZG1hX3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UNCj4gKnBkZXYpDQo+ICAJaWYg
KElTX0VSUihmc2xfZWRtYS0+bWVtYmFzZSkpDQo+ICAJCXJldHVybiBQVFJfRVJSKGZzbF9lZG1h
LT5tZW1iYXNlKTsNCj4gDQo+IC0JZnNsX2VkbWFfc2V0dXBfcmVncyhmc2xfZWRtYSk7DQo+IC0J
cmVncyA9ICZmc2xfZWRtYS0+cmVnczsNCj4gKwlpZiAoIShkcnZkYXRhLT5mbGFncyAmIEZTTF9F
RE1BX0RSVl9TUExJVF9SRUcpKSB7DQo+ICsJCWZzbF9lZG1hX3NldHVwX3JlZ3MoZnNsX2VkbWEp
Ow0KPiArCQlyZWdzID0gJmZzbF9lZG1hLT5yZWdzOw0KPiArCX0NCj4gDQo+ICAJaWYgKGRydmRh
dGEtPmZsYWdzICYgRlNMX0VETUFfRFJWX0hBU19ETUFDTEspIHsNCj4gIAkJZnNsX2VkbWEtPmRt
YWNsayA9IGRldm1fY2xrX2dldF9lbmFibGVkKCZwZGV2LT5kZXYsICJkbWEiKTsNCj4gQEAgLTI3
NCw2ICs0NjEsMTcgQEAgc3RhdGljIGludCBmc2xfZWRtYV9wcm9iZShzdHJ1Y3QgcGxhdGZvcm1f
ZGV2aWNlDQo+ICpwZGV2KQ0KPiAgCQl9DQo+ICAJfQ0KPiANCj4gKwlpZiAoZHJ2ZGF0YS0+Zmxh
Z3MgJiBGU0xfRURNQV9EUlZfSEFTX0NIQ0xLKSB7DQo+ICsJCWZzbF9lZG1hLT5jaGNsayA9IGRl
dm1fY2xrX2dldF9lbmFibGVkKCZwZGV2LT5kZXYsICJtcCIpOw0KPiArCQlpZiAoSVNfRVJSKGZz
bF9lZG1hLT5jaGNsaykpIHsNCj4gKwkJCWRldl9lcnIoJnBkZXYtPmRldiwgIk1pc3NpbmcgTVAg
YmxvY2sgY2xvY2suXG4iKTsNCj4gKwkJCXJldHVybiBQVFJfRVJSKGZzbF9lZG1hLT5jaGNsayk7
DQo+ICsJCX0NCj4gKwl9DQo+ICsNCj4gKwlpZiAob2ZfcHJvcGVydHlfcmVhZF91NjQobnAsICJm
c2wsY2hhbm5lbC1tYXNrIiwNCj4gJmZzbF9lZG1hLT5jaGFuX21hc2tlZCkpDQo+ICsJCWZzbF9l
ZG1hLT5jaGFuX21hc2tlZCA9IDA7DQo+ICsNCj4gIAlmb3IgKGkgPSAwOyBpIDwgZnNsX2VkbWEt
PmRydmRhdGEtPmRtYW11eHM7IGkrKykgew0KPiAgCQljaGFyIGNsa25hbWVbMzJdOw0KPiANCj4g
QEAgLTI5Niw5ICs0OTQsMTggQEAgc3RhdGljIGludCBmc2xfZWRtYV9wcm9iZShzdHJ1Y3QgcGxh
dGZvcm1fZGV2aWNlDQo+ICpwZGV2KQ0KPiANCj4gIAlmc2xfZWRtYS0+YmlnX2VuZGlhbiA9IG9m
X3Byb3BlcnR5X3JlYWRfYm9vbChucCwgImJpZy1lbmRpYW4iKTsNCj4gDQo+ICsJaWYgKGRydmRh
dGEtPmZsYWdzICYgRlNMX0VETUFfRFJWX0hBU19QRCkgew0KPiArCQlyZXQgPSBmc2xfZWRtYTNf
YXR0YWNoX3BkKHBkZXYsIGZzbF9lZG1hKTsNCj4gKwkJaWYgKHJldCkNCj4gKwkJCXJldHVybiBy
ZXQ7DQo+ICsJfQ0KPiArDQo+ICAJSU5JVF9MSVNUX0hFQUQoJmZzbF9lZG1hLT5kbWFfZGV2LmNo
YW5uZWxzKTsNCj4gIAlmb3IgKGkgPSAwOyBpIDwgZnNsX2VkbWEtPm5fY2hhbnM7IGkrKykgew0K
PiAtCQlzdHJ1Y3QgZnNsX2VkbWFfY2hhbiAqZnNsX2NoYW4gPSAmZnNsX2VkbWEtPmNoYW5zW2ld
Ow0KPiArCQlmc2xfY2hhbiA9ICZmc2xfZWRtYS0+Y2hhbnNbaV07DQo+ICsNCj4gKwkJaWYgKGZz
bF9lZG1hLT5jaGFuX21hc2tlZCAmIEJJVChpKSkNCj4gKwkJCWNvbnRpbnVlOw0KPiANCj4gIAkJ
c25wcmludGYoZnNsX2NoYW4tPmNoYW5fbmFtZSwgc2l6ZW9mKGZzbF9jaGFuLT5jaGFuX25hbWUp
LA0KPiAiJXMtQ0glMDJkIiwNCj4gIAkJCQkJCQkgICBkZXZfbmFtZSgmcGRldi0+ZGV2KSwgaSk7
DQo+IEBAIC0zMDksMTIgKzUxNiwxOSBAQCBzdGF0aWMgaW50IGZzbF9lZG1hX3Byb2JlKHN0cnVj
dCBwbGF0Zm9ybV9kZXZpY2UNCj4gKnBkZXYpDQo+ICAJCWZzbF9jaGFuLT5pZGxlID0gdHJ1ZTsN
Cj4gIAkJZnNsX2NoYW4tPmRtYV9kaXIgPSBETUFfTk9ORTsNCj4gIAkJZnNsX2NoYW4tPnZjaGFu
LmRlc2NfZnJlZSA9IGZzbF9lZG1hX2ZyZWVfZGVzYzsNCj4gLQkJZnNsX2NoYW4tPnRjZCA9IGZz
bF9lZG1hLT5tZW1iYXNlICsgRURNQV9UQ0QNCj4gLQkJCQkrIGkgKiBzaXplb2Yoc3RydWN0IGZz
bF9lZG1hX2h3X3RjZCk7DQo+ICsNCj4gKwkJbGVuID0gKGRydmRhdGEtPmZsYWdzICYgRlNMX0VE
TUFfRFJWX1NQTElUX1JFRykgPw0KPiArCQkJCW9mZnNldG9mKHN0cnVjdCBmc2xfZWRtYTNfY2hf
cmVnLCB0Y2QpIDogMDsNCj4gKwkJZnNsX2NoYW4tPnRjZCA9IGZzbF9lZG1hLT5tZW1iYXNlDQo+
ICsJCQkJKyBpICogZHJ2ZGF0YS0+Y2hyZWdfc3BhY2Vfc3ogKyBkcnZkYXRhLT5jaHJlZ19vZmYg
KyBsZW47DQo+ICsNCj4gKwkJZnNsX2NoYW4tPnBkZXYgPSBwZGV2Ow0KPiAgCQl2Y2hhbl9pbml0
KCZmc2xfY2hhbi0+dmNoYW4sICZmc2xfZWRtYS0+ZG1hX2Rldik7DQo+IA0KPiAgCQllZG1hX3dy
aXRlX3RjZHJlZyhmc2xfY2hhbiwgMCwgY3NyKTsNCj4gLQkJZnNsX2VkbWFfY2hhbl9tdXgoZnNs
X2NoYW4sIDAsIGZhbHNlKTsNCj4gKw0KPiArCQlpZiAoZHJ2ZGF0YS0+ZG1hbXV4cykNCj4gKwkJ
CWZzbF9lZG1hX2NoYW5fbXV4KGZzbF9jaGFuLCAwLCBmYWxzZSk7DQo+ICAJfQ0KPiANCj4gIAly
ZXQgPSBmc2xfZWRtYS0+ZHJ2ZGF0YS0+c2V0dXBfaXJxKHBkZXYsIGZzbF9lZG1hKTsgQEAgLTM0
NCwxMg0KPiArNTU4LDI1IEBAIHN0YXRpYyBpbnQgZnNsX2VkbWFfcHJvYmUoc3RydWN0IHBsYXRm
b3JtX2RldmljZSAqcGRldikNCj4gDQo+ICAJZnNsX2VkbWEtPmRtYV9kZXYuc3JjX2FkZHJfd2lk
dGhzID0gRlNMX0VETUFfQlVTV0lEVEhTOw0KPiAgCWZzbF9lZG1hLT5kbWFfZGV2LmRzdF9hZGRy
X3dpZHRocyA9IEZTTF9FRE1BX0JVU1dJRFRIUzsNCj4gKw0KPiArCWlmIChkcnZkYXRhLT5mbGFn
cyAmIEZTTF9FRE1BX0RSVl9CVVNfOEJZVEUpIHsNCj4gKwkJZnNsX2VkbWEtPmRtYV9kZXYuc3Jj
X2FkZHJfd2lkdGhzIHw9DQo+IEJJVChETUFfU0xBVkVfQlVTV0lEVEhfOF9CWVRFUyk7DQo+ICsJ
CWZzbF9lZG1hLT5kbWFfZGV2LmRzdF9hZGRyX3dpZHRocyB8PQ0KPiBCSVQoRE1BX1NMQVZFX0JV
U1dJRFRIXzhfQllURVMpOw0KPiArCX0NCj4gKw0KPiAgCWZzbF9lZG1hLT5kbWFfZGV2LmRpcmVj
dGlvbnMgPSBCSVQoRE1BX0RFVl9UT19NRU0pIHwNCj4gQklUKERNQV9NRU1fVE9fREVWKTsNCj4g
KwlpZiAoZHJ2ZGF0YS0+ZmxhZ3MgJiBGU0xfRURNQV9EUlZfREVWX1RPX0RFVikNCj4gKwkJZnNs
X2VkbWEtPmRtYV9kZXYuZGlyZWN0aW9ucyB8PSBCSVQoRE1BX0RFVl9UT19ERVYpOw0KPiArDQo+
ICsJZnNsX2VkbWEtPmRtYV9kZXYuY29weV9hbGlnbiA9IGRydmRhdGEtPmZsYWdzICYNCj4gRlNM
X0VETUFfRFJWX0FMSUdOXzY0QllURSA/DQo+ICsJCQkJCURNQUVOR0lORV9BTElHTl82NF9CWVRF
UyA6DQo+ICsJCQkJCURNQUVOR0lORV9BTElHTl8zMl9CWVRFUzsNCj4gDQo+IC0JZnNsX2VkbWEt
PmRtYV9kZXYuY29weV9hbGlnbiA9IERNQUVOR0lORV9BTElHTl8zMl9CWVRFUzsNCj4gIAkvKiBQ
ZXIgd29yc3QgY2FzZSAnbmJ5dGVzID0gMScgdGFrZSBDSVRFUiBhcyB0aGUgbWF4X3NlZ19zaXpl
ICovDQo+ICAJZG1hX3NldF9tYXhfc2VnX3NpemUoZnNsX2VkbWEtPmRtYV9kZXYuZGV2LCAweDNm
ZmYpOw0KPiANCj4gKwlmc2xfZWRtYS0+ZG1hX2Rldi5yZXNpZHVlX2dyYW51bGFyaXR5ID0NCj4g
K0RNQV9SRVNJRFVFX0dSQU5VTEFSSVRZX1NFR01FTlQ7DQo+ICsNCj4gIAlwbGF0Zm9ybV9zZXRf
ZHJ2ZGF0YShwZGV2LCBmc2xfZWRtYSk7DQo+IA0KPiAgCXJldCA9IGRtYV9hc3luY19kZXZpY2Vf
cmVnaXN0ZXIoJmZzbF9lZG1hLT5kbWFfZGV2KTsNCj4gQEAgLTM1OSw3ICs1ODYsOSBAQCBzdGF0
aWMgaW50IGZzbF9lZG1hX3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UNCj4gKnBkZXYpDQo+
ICAJCXJldHVybiByZXQ7DQo+ICAJfQ0KPiANCj4gLQlyZXQgPSBvZl9kbWFfY29udHJvbGxlcl9y
ZWdpc3RlcihucCwgZnNsX2VkbWFfeGxhdGUsIGZzbF9lZG1hKTsNCj4gKwlyZXQgPSBvZl9kbWFf
Y29udHJvbGxlcl9yZWdpc3RlcihucCwNCj4gKwkJCWRydmRhdGEtPmZsYWdzICYgRlNMX0VETUFf
RFJWX1NQTElUX1JFRyA/IGZzbF9lZG1hM194bGF0ZSA6DQo+IGZzbF9lZG1hX3hsYXRlLA0KPiAr
CQkJZnNsX2VkbWEpOw0KPiAgCWlmIChyZXQpIHsNCj4gIAkJZGV2X2VycigmcGRldi0+ZGV2LA0K
PiAgCQkJIkNhbid0IHJlZ2lzdGVyIEZyZWVzY2FsZSBlRE1BIG9mX2RtYS4gKCVkKVxuIiwgcmV0
KTsgQEANCj4gLTM2OCw3ICs1OTcsOCBAQCBzdGF0aWMgaW50IGZzbF9lZG1hX3Byb2JlKHN0cnVj
dCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpDQo+ICAJfQ0KPiANCj4gIAkvKiBlbmFibGUgcm91bmQg
cm9iaW4gYXJiaXRyYXRpb24gKi8NCj4gLQllZG1hX3dyaXRlbChmc2xfZWRtYSwgRURNQV9DUl9F
UkdBIHwgRURNQV9DUl9FUkNBLCByZWdzLT5jcik7DQo+ICsJaWYgKCEoZHJ2ZGF0YS0+ZmxhZ3Mg
JiBGU0xfRURNQV9EUlZfU1BMSVRfUkVHKSkNCj4gKwkJZWRtYV93cml0ZWwoZnNsX2VkbWEsIEVE
TUFfQ1JfRVJHQSB8IEVETUFfQ1JfRVJDQSwgcmVncy0+Y3IpOw0KPiANCj4gIAlyZXR1cm4gMDsN
Cj4gIH0NCj4gLS0NCj4gMi4zNC4xDQoNCg==
