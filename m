Return-Path: <linux-kernel-owner@vger.kernel.org>
X-Original-To: lists+linux-kernel@lfdr.de
Delivered-To: lists+linux-kernel@lfdr.de
Received: from out1.vger.email (out1.vger.email [IPv6:2620:137:e000::1:20])
	by mail.lfdr.de (Postfix) with ESMTP id 86084744C96
	for <lists+linux-kernel@lfdr.de>; Sun,  2 Jul 2023 10:01:39 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S229712AbjGBIBf (ORCPT <rfc822;lists+linux-kernel@lfdr.de>);
        Sun, 2 Jul 2023 04:01:35 -0400
Received: from lindbergh.monkeyblade.net ([23.128.96.19]:60790 "EHLO
        lindbergh.monkeyblade.net" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S229516AbjGBIBd (ORCPT
        <rfc822;linux-kernel@vger.kernel.org>);
        Sun, 2 Jul 2023 04:01:33 -0400
Received: from smtp-out2.suse.de (smtp-out2.suse.de [195.135.220.29])
        by lindbergh.monkeyblade.net (Postfix) with ESMTPS id 4D001E4D
        for <linux-kernel@vger.kernel.org>; Sun,  2 Jul 2023 01:01:27 -0700 (PDT)
Received: from imap2.suse-dmz.suse.de (imap2.suse-dmz.suse.de [192.168.254.74])
        (using TLSv1.3 with cipher TLS_AES_256_GCM_SHA384 (256/256 bits)
         key-exchange X25519 server-signature ECDSA (P-521) server-digest SHA512)
        (No client certificate requested)
        by smtp-out2.suse.de (Postfix) with ESMTPS id EEA501F74B;
        Sun,  2 Jul 2023 08:01:25 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=suse.de; s=susede2_rsa;
        t=1688284885; h=from:from:reply-to:date:date:message-id:message-id:to:to:cc:cc:
         mime-version:mime-version:content-type:content-type:
         in-reply-to:in-reply-to:references:references;
        bh=zpcCLpQK1AelFei2rWyD5MrmZOT7dE4hA/bhjP+g5wk=;
        b=qZ4pd+6M+ScjTbqcTKI1/AAr2RUtJEY/8KfcQixAxM2JVj8g5vo4F344tPv4tuh2Vlf6pr
        Z5zo4KJQ9mEgAKwRTKTB2Zck+ENGNoyPAgtiMqiKoCvst0RrIRFy6DxoqaW/Y6bQleYmCz
        y1xfHnPa14wv8cknVYPiqFHunYhJDCI=
DKIM-Signature: v=1; a=ed25519-sha256; c=relaxed/relaxed; d=suse.de;
        s=susede2_ed25519; t=1688284885;
        h=from:from:reply-to:date:date:message-id:message-id:to:to:cc:cc:
         mime-version:mime-version:content-type:content-type:
         in-reply-to:in-reply-to:references:references;
        bh=zpcCLpQK1AelFei2rWyD5MrmZOT7dE4hA/bhjP+g5wk=;
        b=5aONhPudfbHYypCyLAc7rWzWvKWBQaObx/tItXvmacM952aEcd6ic14hRcAKJ3+JKhYs85
        XlglkeJLpWOfbGCw==
Received: from imap2.suse-dmz.suse.de (imap2.suse-dmz.suse.de [192.168.254.74])
        (using TLSv1.3 with cipher TLS_AES_256_GCM_SHA384 (256/256 bits)
         key-exchange X25519 server-signature ECDSA (P-521) server-digest SHA512)
        (No client certificate requested)
        by imap2.suse-dmz.suse.de (Postfix) with ESMTPS id C0F851348D;
        Sun,  2 Jul 2023 08:01:25 +0000 (UTC)
Received: from dovecot-director2.suse.de ([192.168.254.65])
        by imap2.suse-dmz.suse.de with ESMTPSA
        id n47OLdUuoWQ5agAAMHmgww
        (envelope-from <tiwai@suse.de>); Sun, 02 Jul 2023 08:01:25 +0000
Date:   Sun, 02 Jul 2023 10:01:25 +0200
Message-ID: <87mt0e7ne2.wl-tiwai@suse.de>
From:   Takashi Iwai <tiwai@suse.de>
To:     dengxiang <dengxiang@nfschina.com>
Cc:     tiwai@suse.com, yangyingliang@huawei.com, perex@perex.cz,
        linux-kernel@vger.kernel.org
Subject: Re: [PATCH v4] ALSA: hda/realtek: Add quirks for Unis H3C Desktop B760 & Q760
In-Reply-To: <20230701080430.2560118-1-dengxiang@nfschina.com>
References: <20230701080430.2560118-1-dengxiang@nfschina.com>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) Emacs/27.2 Mule/6.0
MIME-Version: 1.0 (generated by SEMI-EPG 1.14.7 - "Harue")
Content-Type: text/plain; charset=US-ASCII
X-Spam-Status: No, score=-4.4 required=5.0 tests=BAYES_00,DKIM_SIGNED,
        DKIM_VALID,DKIM_VALID_AU,DKIM_VALID_EF,RCVD_IN_DNSWL_MED,SPF_HELO_NONE,
        T_SCC_BODY_TEXT_LINE,T_SPF_TEMPERROR autolearn=ham autolearn_force=no
        version=3.4.6
X-Spam-Checker-Version: SpamAssassin 3.4.6 (2021-04-09) on
        lindbergh.monkeyblade.net
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

On Sat, 01 Jul 2023 10:04:30 +0200,
dengxiang wrote:
> 
> These models use NSIWAY amplifiers for internal speaker, but cannot put
> sound outside from these amplifiers. So eapd verbs are needed to initialize
> the amplifiers. They can be added during boot to get working sound out
> of internal speaker.
> 
> ---
> V4:
> - put at the right position to keep the PCI SSID order for the whole.
> V3:
> - do some adjustment for eapd verbs and keep the capital letters for
>   ALC_* enums.
> v2:
> - remove warning about unused variable 'spec'.
> 
> Signed-off-by: dengxiang <dengxiang@nfschina.com>

Signed-off-by tag must be put before the line '---'.
But, above all....

> @@ -11772,6 +11780,7 @@ static const struct snd_pci_quirk alc662_fixup_tbl[] = {
>  	SND_PCI_QUIRK(0x1043, 0x1bf3, "ASUS N76VZ", ALC662_FIXUP_BASS_MODE4_CHMAP),
>  	SND_PCI_QUIRK(0x1043, 0x8469, "ASUS mobo", ALC662_FIXUP_NO_JACK_DETECT),
>  	SND_PCI_QUIRK(0x105b, 0x0cd6, "Foxconn", ALC662_FIXUP_ASUS_MODE2),
> +	SND_PCI_QUIRK(0x10ec, 0x0897, "UNIS H3C X500S", ALC897_FIXUP_UNIS_H3C_X500S),

Now I noticed that 10ec is a generic vendor id for Realtek, so it's
not really specific to your device.  It implies that your BIOS is
still not mature.

I'm fine to take the change for the model name, so that the workaround
can be added via model option, but rather avoid applying the quirk
from this SSID.

Note that there are already a few similar entries, but those are only
for the early reference boards.


thanks,

Takashi
